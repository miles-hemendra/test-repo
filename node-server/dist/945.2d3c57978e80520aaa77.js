(self.webpackChunkblackbox=self.webpackChunkblackbox||[]).push([[945],{2945:(t,e,r)=>{"use strict";r.r(e),r.d(e,{AdminModule:()=>Gt});var o=r(1116),s=r(1462),i=r(8366),n=r(8619),a=r(433),u=r(2290),c=r(3022),l=r(2250),d=r(7719),p=r(322),m=r(9892),g=r(6726),Z=r(4568),h=r(6239),f=r(3454),b=r(1146),q=r(1956);const A=function(){return[""]};function T(t,e){1&t&&n._UZ(0,"img",50),2&t&&n.Q6J("routerLink",n.DdM(1,A))}function C(t,e){1&t&&n._uU(0," Profile Details ")}function v(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"*Enter all the required fields"),n.qZA())}function w(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"Email is already in use. Please try another!"),n.qZA())}function F(t,e){if(1&t&&n.YNc(0,w,2,0,"span",52),2&t){const t=n.oxw();n.Q6J("ngIf",t.profileFormSubmitted&&t.profileFormControls.email.errors&&t.profileFormControls.email.errors.exists)}}function x(t,e){1&t&&n._uU(0," Change Password ")}function y(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"*Enter all the required fields"),n.qZA())}function S(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"Wrong current password!"),n.qZA())}function U(t,e){if(1&t&&n.YNc(0,S,2,0,"span",28),2&t){const t=n.oxw(),e=n.MAs(80);n.Q6J("ngIf",t.passwordFormSubmitted&&t.passwordFormControls.currPassword.errors&&t.passwordFormControls.currPassword.errors.mustMatch)("ngIfElse",e)}}function _(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"New password & Confirm new password do not match!"),n.qZA())}function k(t,e){if(1&t&&n.YNc(0,_,2,0,"span",52),2&t){const t=n.oxw();n.Q6J("ngIf",t.passwordFormSubmitted&&t.passwordFormControls.confirmNewPassword.errors&&t.passwordFormControls.confirmNewPassword.errors.mustMatch)}}function I(t,e){1&t&&n._uU(0," Change Contact ")}function N(t,e){if(1&t&&(n.TgZ(0,"div",58),n._uU(1),n.qZA()),2&t){const t=n.oxw(3);n.xp6(1),n.hij("Resend OTP in ",t.resendSecCount," seconds.")}}function J(t,e){1&t&&(n.TgZ(0,"p-messages",56),n.YNc(1,N,2,1,"ng-template",57),n.qZA())}function D(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"a",59),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2);return e.resendOTP(e.contactForm.value)}),n._uU(1,"Resend OTP"),n.qZA()}}function P(t,e){if(1&t&&(n.TgZ(0,"div",53),n.YNc(1,J,2,0,"p-messages",54),n.YNc(2,D,2,0,"a",55),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",!t.showResend),n.xp6(1),n.Q6J("ngIf",t.showResend)}}function Y(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"*Enter all the required fields"),n.qZA())}function O(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"Contact number already in use. Please try another!"),n.qZA())}function E(t,e){if(1&t&&n.YNc(0,O,2,0,"span",28),2&t){const t=n.oxw(),e=n.MAs(104);n.Q6J("ngIf",t.contactFormSubmitted&&t.contactFormControls.contact.errors&&t.contactFormControls.contact.errors.exists)("ngIfElse",e)}}function Q(t,e){1&t&&(n.TgZ(0,"span",51),n._uU(1,"Wrong OTP or contact number mismatched. Please try again!"),n.qZA())}function M(t,e){if(1&t&&n.YNc(0,Q,2,0,"span",52),2&t){const t=n.oxw();n.Q6J("ngIf",t.contactFormSubmitted&&!t.contactFormControls.otp.errors&&t.invalidOTP)}}const B=function(){return{width:"50vw"}},R=function(){return{width:"45vw"}};let j=(()=>{class t{constructor(t,e,r,o,s){this.tokenService=t,this.router=e,this.fb=r,this.userService=o,this.messageService=s,this.items=[],this.profileFormSubmitted=!1,this.showProfileDialog=!1,this.states=[],this.passwordFormSubmitted=!1,this.showPasswordDialog=!1,this.contactFormSubmitted=!1,this.showContactDialog=!1,this.otpSent=!1,this.invalidOTP=!1,this.showResend=!1,this.resendSecCount=30}ngOnInit(){this.user=this.tokenService.getUser(),this.items=[{label:this.user.fname,icon:"pi pi-user",items:[{label:"Profile",icon:"pi pi-user-edit",command:this.editProfile.bind(this)},{label:"Logout",icon:"pi pi-power-off",command:this.logout.bind(this)}]}],this.states=[{name:"Chhattisgarh",value:"Chhattisgarh"}],this.profileForm=this.fb.group({fname:[this.user.fname,s.kI.required],lname:[this.user.lname,s.kI.required],contact:[this.user.contact,s.kI.required],email:[this.user.email,s.kI.required],address:[this.user.address,s.kI.required],city:[this.user.city,s.kI.required],state:[{name:this.user.state,value:this.user.state},s.kI.required],pincode:[this.user.pincode,s.kI.required]},{validator:this.checkEmail()}),this.passwordForm=this.fb.group({currPassword:["",s.kI.required],newPassword:["",s.kI.required],confirmNewPassword:["",s.kI.required]},{validator:this.MustMatch()}),this.contactForm=this.fb.group({contact:["",s.kI.required],otp:[""]},{validator:this.checkContact()})}editProfile(){this.showProfileDialog=!0}submitProfileForm(t){Object.keys(this.profileFormControls).forEach(t=>{this.profileFormControls[t].markAsDirty()}),this.profileFormSubmitted=!0,this.profileForm.valid&&this.userService.updateProfile(t).subscribe(t=>{t.contact?(t.accessToken=this.tokenService.getToken(),this.tokenService.saveUser(t),this.messageService.add({severity:"success",summary:"Success",detail:"Profile updated successfully."}),this.showProfileDialog=!1):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})})}editContact(){this.contactForm.reset(),this.contactFormSubmitted=!1,this.showContactDialog=!0}changePassword(){this.passwordForm.reset(),this.passwordFormSubmitted=!1,this.showPasswordDialog=!0}checkEmail(){return t=>{const e=t.controls.email;this.userService.checkEmailExists(e.value).subscribe(t=>{e.errors&&!e.errors.exists||e.setErrors("exists"==t.status?{exists:!0}:null)})}}MustMatch(){return t=>{const e=t.controls.newPassword,r=t.controls.confirmNewPassword,o=t.controls.currPassword;console.log("curr--\x3e ",o),console.log("new--\x3e ",e),console.log("confirm--\x3e ",o),this.userService.checkCurrPassword(o.value).subscribe(t=>{console.log("rrrr---\x3e> ",t),r.errors&&!r.errors.mustMatch||o.errors&&!o.errors.mustMatch||(r.setErrors(e.value!==r.value?{mustMatch:!0}:null),o.setErrors("match"==t.status?null:{mustMatch:!0}))})}}checkContact(){return t=>{const e=t.controls.contact;this.userService.checkContactExists(e.value).subscribe(t=>{e.errors&&!e.errors.exists||e.setErrors("exists"==t.status?{exists:!0}:null)})}}submitPasswordForm(t){Object.keys(this.passwordFormControls).forEach(t=>{this.passwordFormControls[t].markAsDirty()}),this.passwordFormSubmitted=!0,this.passwordForm.valid&&this.userService.updatePassword(t.newPassword).subscribe(t=>{"success"==t.status&&(this.messageService.add({severity:"success",summary:"Success",detail:"Password updated successfully."}),this.showPasswordDialog=!1)})}submitContactForm(t){Object.keys(this.contactFormControls).forEach(t=>{this.contactFormControls[t].markAsDirty()}),this.contactFormSubmitted=!0,this.contactForm.valid&&(this.otpSent?this.userService.updateContact(t.contact,t.otp.split("-").join("")).subscribe(e=>{e.contact?(e.accessToken=this.tokenService.getToken(),this.tokenService.saveUser(e),this.profileFormControls.contact.setValue(t.contact),this.messageService.add({severity:"success",summary:"Success",detail:"Contact updated successfully."}),this.showContactDialog=!1):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})},t=>{this.messageService.add({severity:"error",summary:"Error",detail:"Wrong OTP or contact number mismatched. Please try again!"}),this.showContactDialog=!1}):this.userService.sendOTPForContactUpdate(t.contact).subscribe(t=>{console.log("rrrr",t),"success"==t.status&&(this.otpSent=!0,this.contactFormSubmitted=!1,this.contactFormControls.otp.setValidators([s.kI.required]),this.contactFormControls.otp.updateValueAndValidity(),this.startResendOtpTimer())}))}startResendOtpTimer(){this.showResend=!1,this.resendSecCount=30;var t=setInterval(()=>{this.resendSecCount--},1e3);setTimeout(()=>{clearInterval(t),this.showResend=!0},3e4)}resendOTP(t){this.userService.sendOTPForContactUpdate(t.contact).subscribe(t=>{console.log("rrrr",t),"success"==t.status&&this.startResendOtpTimer()})}get profileFormControls(){return this.profileForm.controls}get passwordFormControls(){return this.passwordForm.controls}get contactFormControls(){return this.contactForm.controls}logout(){this.tokenService.signOut(),this.router.navigate([""])}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(c.B),n.Y36(i.F0),n.Y36(s.qu),n.Y36(l.K),n.Y36(u.ez))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-header"]],features:[n._Bn([u.ez])],decls:109,vars:31,consts:[["styleClass","dashboard-menu",3,"model"],["pTemplate","start"],[1,"login-dialog",3,"visible","modal","visibleChange"],["pTemplate","header"],[1,"p-grid","p-fluid","p-pt-4"],[2,"width","100%",3,"formGroup","submit"],[1,"p-field","p-d-inline-block","p-col-12","p-md-6"],[1,"p-float-label"],["type","text","id","fname","pInputText","","formControlName","fname"],["for","fname",1,"required"],["type","text","id","lname","pInputText","","formControlName","lname"],["for","lname",1,"required"],["type","text","id","contact","pInputText","","formControlName","contact",2,"width","90%",3,"readOnly"],["for","contact",1,"required"],["pButton","","type","button","icon","pi pi-pencil","title","Edit Contact",1,"p-button-text","p-button-warning",2,"width","9%",3,"click"],["type","text","id","email","pInputText","","formControlName","email"],["for","email",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-12"],["type","text","id","address","pInputText","","formControlName","address"],["for","address",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-4"],["type","text","id","city","pInputText","","formControlName","city"],["for","city",1,"required"],["inputId","state","formControlName","state","optionLabel","name",3,"autoDisplayFirst","options"],["for","state",1,"required"],["type","text","id","pincode","pInputText","","formControlName","pincode"],["for","pincode",1,"required"],[1,"p-col-12","p-md-12","p-d-inline-block"],["class","p-error",4,"ngIf","ngIfElse"],["else1",""],[1,"p-col-12","p-md-6","p-d-inline-block"],["pButton","","pRipple","","label","Change Password","icon","pi pi-unlock","type","button",1,"p-button-outlined","p-button-help",2,"width","auto",3,"click"],[1,"p-col-12","p-md-6","p-text-right","p-d-inline-block"],["pButton","","pRipple","","label","Cancel","type","button",1,"p-button-outlined","p-button-secondary",2,"width","auto",3,"click"],["pButton","","pRipple","","label","Update","type","submit",1,"p-button-outlined",2,"width","auto","margin-left","15px"],["type","text","id","currPassword","pInputText","","formControlName","currPassword"],["for","currPassword",1,"required"],["type","text","id","newPassword","pInputText","","formControlName","newPassword"],["for","newPassword",1,"required"],["type","text","id","confirmNewPassword","pInputText","","formControlName","confirmNewPassword"],["for","confirmNewPassword",1,"required"],["else2",""],["else3",""],["type","text","id","contact","pInputText","","formControlName","contact"],["id","otp","mask","9-9-9-9","formControlName","otp",3,"disabled"],["for","otp",1,"required"],["class","p-col-12",4,"ngIf"],["else4",""],["else5",""],["pButton","","pRipple","","type","submit",1,"p-button-outlined",2,"width","auto","margin-left","15px",3,"label"],["src","assets/landing/logo.svg",1,"p-mr-2",2,"cursor","pointer",3,"routerLink"],[1,"p-error"],["class","p-error",4,"ngIf"],[1,"p-col-12"],["severity","info",4,"ngIf"],["href","javascript:;","style","color: #fff;",3,"click",4,"ngIf"],["severity","info"],["pTemplate",""],[1,"p-ml-2"],["href","javascript:;",2,"color","#fff",3,"click"]],template:function(t,e){if(1&t&&(n.TgZ(0,"p-menubar",0),n.YNc(1,T,1,2,"ng-template",1),n.qZA(),n.TgZ(2,"p-dialog",2),n.NdJ("visibleChange",function(t){return e.showProfileDialog=t}),n.YNc(3,C,1,0,"ng-template",3),n.TgZ(4,"div",4),n.TgZ(5,"form",5),n.NdJ("submit",function(){return e.submitProfileForm(e.profileForm.value)}),n.TgZ(6,"div",6),n.TgZ(7,"span",7),n._UZ(8,"input",8),n.TgZ(9,"label",9),n._uU(10,"First Name"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"div",6),n.TgZ(12,"span",7),n._UZ(13,"input",10),n.TgZ(14,"label",11),n._uU(15,"Last Name"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",6),n.TgZ(17,"span",7),n._UZ(18,"input",12),n.TgZ(19,"label",13),n._uU(20,"Contact"),n.qZA(),n.TgZ(21,"button",14),n.NdJ("click",function(){return e.editContact()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(22,"div",6),n.TgZ(23,"span",7),n._UZ(24,"input",15),n.TgZ(25,"label",16),n._uU(26,"E-mail"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"div",17),n.TgZ(28,"span",7),n._UZ(29,"input",18),n.TgZ(30,"label",19),n._uU(31,"Address"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(32,"div",20),n.TgZ(33,"span",7),n._UZ(34,"input",21),n.TgZ(35,"label",22),n._uU(36,"City"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(37,"div",20),n.TgZ(38,"span",7),n._UZ(39,"p-dropdown",23),n.TgZ(40,"label",24),n._uU(41,"State"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(42,"div",20),n.TgZ(43,"span",7),n._UZ(44,"input",25),n.TgZ(45,"label",26),n._uU(46,"Pincode"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(47,"div",27),n.YNc(48,v,2,0,"span",28),n.YNc(49,F,1,1,"ng-template",null,29,n.W1O),n.qZA(),n.TgZ(51,"div",30),n.TgZ(52,"button",31),n.NdJ("click",function(){return e.changePassword()}),n.qZA(),n.qZA(),n.TgZ(53,"div",32),n.TgZ(54,"button",33),n.NdJ("click",function(){return e.showProfileDialog=!1}),n.qZA(),n._UZ(55,"button",34),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(56,"p-dialog",2),n.NdJ("visibleChange",function(t){return e.showPasswordDialog=t}),n.YNc(57,x,1,0,"ng-template",3),n.TgZ(58,"div",4),n.TgZ(59,"form",5),n.NdJ("submit",function(){return e.submitPasswordForm(e.passwordForm.value)}),n.TgZ(60,"div",17),n.TgZ(61,"span",7),n._UZ(62,"input",35),n.TgZ(63,"label",36),n._uU(64,"Current Password"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(65,"div",17),n.TgZ(66,"span",7),n._UZ(67,"input",37),n.TgZ(68,"label",38),n._uU(69,"New Password"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(70,"div",17),n.TgZ(71,"span",7),n._UZ(72,"input",39),n.TgZ(73,"label",40),n._uU(74,"Confirm New Password"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(75,"div",30),n.YNc(76,y,2,0,"span",28),n.YNc(77,U,1,2,"ng-template",null,41,n.W1O),n.YNc(79,k,1,1,"ng-template",null,42,n.W1O),n.qZA(),n.TgZ(81,"div",32),n.TgZ(82,"button",33),n.NdJ("click",function(){return e.showPasswordDialog=!1}),n.qZA(),n._UZ(83,"button",34),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(84,"p-dialog",2),n.NdJ("visibleChange",function(t){return e.showContactDialog=t}),n.YNc(85,I,1,0,"ng-template",3),n.TgZ(86,"div",4),n.TgZ(87,"form",5),n.NdJ("submit",function(){return e.submitContactForm(e.contactForm.value)}),n.TgZ(88,"div",17),n.TgZ(89,"span",7),n._UZ(90,"input",43),n.TgZ(91,"label",13),n._uU(92,"Contact"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(93,"div",17),n.TgZ(94,"span",7),n._UZ(95,"p-inputMask",44),n.TgZ(96,"label",45),n._uU(97,"OTP"),n.qZA(),n.qZA(),n.qZA(),n.YNc(98,P,3,2,"div",46),n.TgZ(99,"div",30),n.YNc(100,Y,2,0,"span",28),n.YNc(101,E,1,2,"ng-template",null,47,n.W1O),n.YNc(103,M,1,1,"ng-template",null,48,n.W1O),n.qZA(),n.TgZ(105,"div",32),n.TgZ(106,"button",33),n.NdJ("click",function(){return e.showContactDialog=!1}),n.qZA(),n._UZ(107,"button",49),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(108,"p-toast")),2&t){const t=n.MAs(50),r=n.MAs(78),o=n.MAs(102);n.Q6J("model",e.items),n.xp6(2),n.Akn(n.DdM(28,B)),n.Q6J("visible",e.showProfileDialog)("modal",!0),n.xp6(3),n.Q6J("formGroup",e.profileForm),n.xp6(13),n.Q6J("readOnly",!0),n.xp6(21),n.Q6J("autoDisplayFirst",!1)("options",e.states),n.xp6(9),n.Q6J("ngIf",e.profileFormSubmitted&&(e.profileFormControls.address.errors&&e.profileFormControls.address.errors.required||e.profileFormControls.fname.errors&&e.profileFormControls.fname.errors.required||e.profileFormControls.lname.errors&&e.profileFormControls.lname.errors.required||e.profileFormControls.contact.errors&&e.profileFormControls.contact.errors.required||e.profileFormControls.email.errors&&e.profileFormControls.email.errors.required||e.profileFormControls.city.errors&&e.profileFormControls.city.errors.required||e.profileFormControls.state.errors&&e.profileFormControls.state.errors.required||e.profileFormControls.pincode.errors&&e.profileFormControls.pincode.errors.required))("ngIfElse",t),n.xp6(8),n.Akn(n.DdM(29,R)),n.Q6J("visible",e.showPasswordDialog)("modal",!0),n.xp6(3),n.Q6J("formGroup",e.passwordForm),n.xp6(17),n.Q6J("ngIf",e.passwordFormSubmitted&&(e.passwordFormControls.currPassword.errors&&e.passwordFormControls.currPassword.errors.required||e.passwordFormControls.newPassword.errors&&e.passwordFormControls.newPassword.errors.required||e.passwordFormControls.confirmNewPassword.errors&&e.passwordFormControls.confirmNewPassword.errors.required))("ngIfElse",r),n.xp6(8),n.Akn(n.DdM(30,R)),n.Q6J("visible",e.showContactDialog)("modal",!0),n.xp6(3),n.Q6J("formGroup",e.contactForm),n.xp6(8),n.Q6J("disabled",!e.otpSent),n.xp6(3),n.Q6J("ngIf",e.otpSent),n.xp6(2),n.Q6J("ngIf",e.contactFormSubmitted&&(e.contactFormControls.contact.errors&&e.contactFormControls.contact.errors.required||e.contactFormControls.otp.errors&&e.contactFormControls.otp.errors.required))("ngIfElse",o),n.xp6(7),n.s9C("label",e.otpSent?"Update":"Send OTP")}},directives:[d.nm,u.jx,p.V,s._Y,s.JL,s.sg,s.Fj,m.o,s.JJ,s.u,g.Hq,Z.Lt,o.O5,h.H,f.vy,b.FN,i.rH,q.V],styles:[""]}),t})();var L=r(9065);function $(t,e){if(1&t&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.hij(" ",t.header," ")}}function H(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,$,2,1,"th",8),n.TgZ(2,"th"),n._uU(3," Action "),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Q6J("ngForOf",t)}}function G(t,e){if(1&t&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&t){const t=e.$implicit,r=n.oxw().$implicit;n.xp6(1),n.hij(" ",r[t.field]," ")}}function W(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,G,2,1,"td",8),n.TgZ(2,"td"),n._UZ(3,"button",9),n._UZ(4,"button",10),n.qZA(),n.qZA()),2&t){const t=e.columns;n.xp6(1),n.Q6J("ngForOf",t)}}function z(t,e){1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td",11),n._uU(2," No cameras found. "),n.qZA(),n.qZA())}const V=function(){return["/admin/dashboard"]};let X=(()=>{class t{constructor(t,e,r){this.route=t,this.cameraService=e,this.router=r,this.cols=[],this.cameras=[],this.displayAddEditCameraDialog=!1}ngOnInit(){this.cols=[{field:"name",header:"Name"}],this.loadCameras()}loadCameras(){this.cameraService.getAllCameras().subscribe(t=>{this.cameras=t})}showAddCameraDialog(){this.displayAddEditCameraDialog=!0}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(i.gz),n.Y36(a.y),n.Y36(i.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-cameras"]],decls:10,vars:4,consts:[[1,"dashboard-page","p-grid"],[1,"p-col-12"],["pButton","","pRipple","","icon","pi pi-arrow-left","label","Go Back","type","button",1,"p-button-outlined","p-button-secondary",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-user-add","label","Add Camera","type","button",1,"p-button-outlined",2,"float","right",3,"click"],[3,"columns","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-pencil","type","button",1,"p-button-outlined","p-button-warning","p-button-rounded"],["pButton","","pRipple","","icon","pi pi-trash","type","button",1,"p-button-outlined","p-button-danger","p-button-rounded"],[1,"p-text-center"]],template:function(t,e){1&t&&(n._UZ(0,"app-header"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n._UZ(3,"button",2),n.TgZ(4,"button",3),n.NdJ("click",function(){return e.showAddCameraDialog()}),n.qZA(),n.qZA(),n.TgZ(5,"div",1),n.TgZ(6,"p-table",4),n.YNc(7,H,4,1,"ng-template",5),n.YNc(8,W,5,1,"ng-template",6),n.YNc(9,z,3,0,"ng-template",7),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Q6J("routerLink",n.DdM(3,V)),n.xp6(3),n.Q6J("columns",e.cols)("value",e.cameras))},directives:[j,g.Hq,h.H,i.rH,L.iA,u.jx,o.sg],styles:[""]}),t})();var K=r(4833);function tt(t,e){if(1&t&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.hij(" ",t.header," ")}}function et(t,e){1&t&&(n.TgZ(0,"th"),n._uU(1," Action "),n.qZA())}function rt(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,tt,2,1,"th",7),n.YNc(2,et,2,0,"th",8),n.qZA()),2&t){const t=e.$implicit,r=n.oxw();n.xp6(1),n.Q6J("ngForOf",t),n.xp6(1),n.Q6J("ngIf","closed"!==r.caseStatus)}}function ot(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"button",10),n.NdJ("click",function(){n.CHM(t);const e=n.oxw(2).$implicit;return n.oxw().openImage(e.image)}),n.qZA()}}function st(t,e){if(1&t&&(n.TgZ(0,"td"),n._uU(1),n.YNc(2,ot,1,0,"button",9),n.qZA()),2&t){const t=e.$implicit,r=n.oxw().$implicit;n.xp6(1),n.hij(" ","user"==t.field?r.user.fname+" "+r.user.lname:"userContact"==t.field?r.user.contact:"userEmail"==t.field?r.user.email:"image"!==t.field?r[t.field]:""," "),n.xp6(1),n.Q6J("ngIf","image"==t.field&&"Motion Detection"==r.name)}}function it(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"td"),n.TgZ(1,"button",11),n.NdJ("click",function(){n.CHM(t);const e=n.oxw().$implicit;return n.oxw().changeCaseStatus(e.id)}),n.qZA(),n.qZA()}if(2&t){const t=n.oxw(2);n.xp6(1),n.Gre("p-button-outlined ","open"==t.caseStatus?"p-button-success":"p-button-warning",""),n.MGl("icon","pi ","open"==t.caseStatus?"pi-check-circle":"pi-play",""),n.s9C("label","new"==t.caseStatus?"Set as Open":"open"==t.caseStatus?"Set as Closed":"")}}function nt(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,st,3,2,"td",7),n.YNc(2,it,2,5,"td",8),n.qZA()),2&t){const t=e.columns,r=n.oxw();n.xp6(1),n.Q6J("ngForOf",t),n.xp6(1),n.Q6J("ngIf","closed"!==r.caseStatus)}}function at(t,e){if(1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td",12),n._uU(2," No case found. "),n.qZA(),n.qZA()),2&t){const t=e.$implicit,r=n.oxw();n.xp6(1),n.uIk("colspan","closed"!==r.caseStatus?t.length+1:t.length)}}const ut=function(){return["/admin/dashboard"]};let ct=(()=>{class t{constructor(t,e,r,o){this.route=t,this.userService=e,this.router=r,this.window=o,this.cols=[],this.cases=[]}ngOnInit(){this.cols=[{field:"name",header:"Case"},{field:"user",header:"Customer"},{field:"userEmail",header:"Contact"},{field:"userContact",header:"Email"},{field:"createdAt",header:"Date/Time"},{field:"image",header:"Image"}],this.caseStatusSub=this.route.params.subscribe(t=>this.loadCases(t.status))}loadCases(t){this.caseStatus=t,"new"==this.caseStatus?this.userService.getSICases("new").subscribe(t=>{this.cases=t.cases}):"open"==this.caseStatus?this.userService.getSICases("open").subscribe(t=>{this.cases=t.cases}):"closed"==this.caseStatus?this.userService.getSICases("closed").subscribe(t=>{this.cases=t.cases}):this.router.navigate(["/user/dashboard"])}changeCaseStatus(t){"new"==this.caseStatus?this.userService.setCaseOpen(t).subscribe(t=>{"success"==t.status&&this.loadCases(this.caseStatus)}):"open"==this.caseStatus&&this.userService.setCaseClose(t).subscribe(t=>{"success"==t.status&&this.loadCases(this.caseStatus)})}openImage(t){console.log("host",t);const e=this.window.open(t,"_blank");e&&e.focus()}ngOnDestroy(){this.caseStatusSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(i.gz),n.Y36(l.K),n.Y36(i.F0),n.Y36(K.m))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-case"]],decls:9,vars:4,consts:[[1,"dashboard-page","p-grid"],[1,"p-col-12"],["pButton","","pRipple","","icon","pi pi-arrow-left","label","Go Back","type","button",1,"p-button-outlined","p-button-secondary",3,"routerLink"],[3,"columns","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngFor","ngForOf"],[4,"ngIf"],["pButton","","pRipple","","class","p-button-outlined p-button-rounded p-button-info","icon","pi pi-image","type","button",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-image","type","button",1,"p-button-outlined","p-button-rounded","p-button-info",3,"click"],["pButton","","pRipple","","iconPos","right","type","button",3,"icon","label","click"],[1,"p-text-center"]],template:function(t,e){1&t&&(n._UZ(0,"app-header"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n._UZ(3,"button",2),n.qZA(),n.TgZ(4,"div",1),n.TgZ(5,"p-table",3),n.YNc(6,rt,3,2,"ng-template",4),n.YNc(7,nt,3,2,"ng-template",5),n.YNc(8,at,3,1,"ng-template",6),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Q6J("routerLink",n.DdM(3,ut)),n.xp6(2),n.Q6J("columns",e.cols)("value",e.cases))},directives:[j,g.Hq,h.H,i.rH,L.iA,u.jx,o.sg,o.O5],styles:[""]}),t})();var lt=r(8751);const dt=function(){return["/admin/manage-subadmin"]},pt=function(){return["/admin/manage-si"]},mt=function(){return["/admin/manage-cameras"]};let gt=(()=>{class t{constructor(t){this.userService=t}ngOnInit(){this.userService.getAdminDashboardData().subscribe(t=>{console.log("dashCounts",t),this.dashboardData=t})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(l.K))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-dashboard"]],decls:62,vars:15,consts:[[1,"p-grid","dashboard-page"],[1,"p-col-4","p-text-center"],[3,"routerLink"]],template:function(t,e){1&t&&(n._UZ(0,"app-header"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n.TgZ(3,"p-card",2),n.TgZ(4,"h1"),n._uU(5,"Subadmins"),n.qZA(),n.TgZ(6,"h3"),n._uU(7),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",1),n.TgZ(9,"p-card",2),n.TgZ(10,"h1"),n._uU(11,"SIs"),n.qZA(),n.TgZ(12,"h3"),n._uU(13),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"div",1),n.TgZ(15,"p-card"),n.TgZ(16,"h1"),n._uU(17,"Customers"),n.qZA(),n.TgZ(18,"h3"),n._uU(19),n.qZA(),n.qZA(),n.qZA(),n.TgZ(20,"div",1),n.TgZ(21,"p-card",2),n.TgZ(22,"h1"),n._uU(23,"Cameras"),n.qZA(),n.TgZ(24,"h3"),n._uU(25),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"div",1),n.TgZ(27,"p-card"),n.TgZ(28,"h1"),n._uU(29,"DVRs"),n.qZA(),n.TgZ(30,"h3"),n._uU(31),n.qZA(),n.qZA(),n.qZA(),n.TgZ(32,"div",1),n.TgZ(33,"p-card"),n.TgZ(34,"h1"),n._uU(35,"Plans"),n.qZA(),n.TgZ(36,"h3"),n._uU(37),n.qZA(),n.qZA(),n.qZA(),n.TgZ(38,"div",1),n.TgZ(39,"p-card"),n.TgZ(40,"h1"),n._uU(41,"New Cases"),n.qZA(),n.TgZ(42,"h3"),n._uU(43),n.qZA(),n.qZA(),n.qZA(),n.TgZ(44,"div",1),n.TgZ(45,"p-card"),n.TgZ(46,"h1"),n._uU(47,"Open Cases"),n.qZA(),n.TgZ(48,"h3"),n._uU(49),n.qZA(),n.qZA(),n.qZA(),n.TgZ(50,"div",1),n.TgZ(51,"p-card"),n.TgZ(52,"h1"),n._uU(53,"Closed Cases"),n.qZA(),n.TgZ(54,"h3"),n._uU(55),n.qZA(),n.qZA(),n.qZA(),n.TgZ(56,"div",1),n.TgZ(57,"p-card"),n.TgZ(58,"h1"),n._uU(59,"Earnings"),n.qZA(),n.TgZ(60,"h3"),n._uU(61,"0"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Q6J("routerLink",n.DdM(12,dt)),n.xp6(4),n.Oqu(e.dashboardData?e.dashboardData.subadminCount:0),n.xp6(2),n.Q6J("routerLink",n.DdM(13,pt)),n.xp6(4),n.Oqu(e.dashboardData?e.dashboardData.siCount:0),n.xp6(6),n.Oqu(e.dashboardData?e.dashboardData.userCount:0),n.xp6(2),n.Q6J("routerLink",n.DdM(14,mt)),n.xp6(4),n.Oqu(e.dashboardData?e.dashboardData.cameraCount:0),n.xp6(6),n.Oqu(e.dashboardData?e.dashboardData.dvrCount:0),n.xp6(6),n.Oqu(e.dashboardData?e.dashboardData.planCount:0),n.xp6(6),n.Oqu(e.dashboardData?e.dashboardData.newCaseCount:0),n.xp6(6),n.Oqu(e.dashboardData?e.dashboardData.newCaseCount:0),n.xp6(6),n.Oqu(e.dashboardData?e.dashboardData.newCaseCount:0))},directives:[j,lt.Z,i.rH],styles:[""]}),t})(),Zt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-dvrs"]],decls:2,vars:0,template:function(t,e){1&t&&(n.TgZ(0,"p"),n._uU(1,"dvrs works!"),n.qZA())},styles:[""]}),t})(),ht=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-plans"]],decls:2,vars:0,template:function(t,e){1&t&&(n.TgZ(0,"p"),n._uU(1,"plans works!"),n.qZA())},styles:[""]}),t})();function ft(t,e){if(1&t&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.hij(" ",t.header," ")}}function bt(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,ft,2,1,"th",38),n.TgZ(2,"th"),n._uU(3," Action "),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Q6J("ngForOf",t)}}function qt(t,e){if(1&t&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&t){const t=e.$implicit,r=n.oxw().$implicit;n.xp6(1),n.hij(" ","name"==t.field?r.fname+" "+r.lname:"address"==t.field?r.address+", "+r.city+", "+r.pincode:r[t.field]," ")}}function At(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,qt,2,1,"td",38),n.TgZ(2,"td"),n._UZ(3,"button",39),n._UZ(4,"button",40),n.qZA(),n.qZA()),2&t){const t=e.columns;n.xp6(1),n.Q6J("ngForOf",t)}}function Tt(t,e){if(1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td",41),n._uU(2," No SI found. "),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.uIk("colspan",t.length+1)}}function Ct(t,e){1&t&&n._uU(0," Add SI ")}function vt(t,e){1&t&&(n.TgZ(0,"span",42),n._uU(1,"*Enter all the required fields"),n.qZA())}function wt(t,e){1&t&&(n.TgZ(0,"span",42),n._uU(1,"Email is already in use. Please try another!"),n.qZA())}function Ft(t,e){if(1&t&&n.YNc(0,wt,2,0,"span",32),2&t){const t=n.oxw(),e=n.MAs(59);n.Q6J("ngIf",t.siFormSubmitted&&t.siFormControls.email.errors&&t.siFormControls.email.errors.exists)("ngIfElse",e)}}function xt(t,e){1&t&&(n.TgZ(0,"span",42),n._uU(1,"Contact is already in use. Please try another!"),n.qZA())}function yt(t,e){if(1&t&&n.YNc(0,xt,2,0,"span",43),2&t){const t=n.oxw();n.Q6J("ngIf",t.siFormSubmitted&&t.siFormControls.contact.errors&&t.siFormControls.contact.errors.exists)}}const St=function(){return["/admin/dashboard"]},Ut=function(){return{width:"75vw"}};let _t=(()=>{class t{constructor(t,e,r){this.userService=t,this.fb=e,this.messageService=r,this.cols=[],this.showAddSIDialog=!1,this.states=[],this.siFormSubmitted=!1}ngOnInit(){this.cols=[{field:"name",header:"Name"},{field:"contact",header:"Contact"},{field:"email",header:"E-mail"},{field:"address",header:"Address"}],this.states=[{name:"Chhattisgarh",value:"Chhattisgarh"}],this.userService.getAllSI().subscribe(t=>{console.log("all-si",t),this.allSI=t}),this.siForm=this.fb.group({fname:["",s.kI.required],lname:["",s.kI.required],contact:["",s.kI.required],email:["",s.kI.required],address:["",s.kI.required],city:["",s.kI.required],state:["",s.kI.required],pincode:["",s.kI.required]},{validator:this.checkContactAndEmail()})}checkContactAndEmail(){return t=>{const e=t.controls.email,r=t.controls.contact;this.userService.checkContactExists(r.value).subscribe(t=>{this.userService.checkEmailExists(e.value).subscribe(o=>{r.errors&&!r.errors.mustMatch||e.errors&&!e.errors.mustMatch||(r.setErrors("exists"==t.status?{exists:!0}:null),e.setErrors("exists"==o.status?{exists:!0}:null))})})}}addSI(){this.siForm.reset(),this.siFormSubmitted=!1,this.showAddSIDialog=!0}submitSIForm(t){Object.keys(this.siFormControls).forEach(t=>{this.siFormControls[t].markAsDirty()}),this.siFormSubmitted=!0,this.siForm.valid&&this.userService.addSI(t).subscribe(t=>{"success"==t.status&&(this.showAddSIDialog=!1,this.allSI.unshift(t.si),this.messageService.add({severity:"success",summary:"Success",detail:"SI added successfully."}))},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})})}get siFormControls(){return this.siForm.controls}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(l.K),n.Y36(s.qu),n.Y36(u.ez))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-si"]],features:[n._Bn([u.ez])],decls:64,vars:13,consts:[[1,"dashboard-page","p-grid"],[1,"p-col-12"],["pButton","","pRipple","","icon","pi pi-arrow-left","label","Go Back","type","button",1,"p-button-outlined","p-button-secondary",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-user-add","label","Add SI","type","button",1,"p-button-outlined",2,"float","right",3,"click"],["empty","",3,"columns","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"login-dialog",3,"visible","visibleChange"],[1,"p-grid","p-fluid","p-pt-4"],[2,"width","100%",3,"formGroup","submit"],[1,"p-field","p-d-inline-block","p-col-12","p-md-6"],[1,"p-float-label"],["type","text","id","fname","pInputText","","formControlName","fname"],["for","fname",1,"required"],["type","text","id","lname","pInputText","","formControlName","lname"],["for","lname",1,"required"],["type","text","id","contact","pInputText","","formControlName","contact"],["for","contact",1,"required"],["type","text","id","email","pInputText","","formControlName","email"],["for","email",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-12"],["type","text","id","address","pInputText","","formControlName","address"],["for","address",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-4"],["type","text","id","city","pInputText","","formControlName","city"],["for","city",1,"required"],["inputId","state","formControlName","state","optionLabel","name",3,"autoDisplayFirst","options"],["for","state",1,"required"],["type","text","id","pincode","pInputText","","formControlName","pincode"],["for","pincode",1,"required"],[1,"p-col-12","p-md-6","p-d-inline-block"],["class","p-error",4,"ngIf","ngIfElse"],["else1",""],["else2",""],[1,"p-col-12","p-md-6","p-d-inline-block","p-text-right"],["pButton","","pRipple","","label","Cancel","type","button",1,"p-button-outlined","p-button-secondary",2,"width","auto",3,"click"],["pButton","","pRipple","","label","Add","type","submit",1,"p-button-outlined",2,"width","auto","margin-left","15px"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-user-edit","type","button",1,"p-button-outlined","p-button-warning"],["pButton","","pRipple","","icon","pi pi-times","type","button",1,"p-button-danger","p-button-outlined","p-ml-3"],[1,"p-text-center"],[1,"p-error"],["class","p-error",4,"ngIf"]],template:function(t,e){if(1&t&&(n._UZ(0,"app-header"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n._UZ(3,"button",2),n.TgZ(4,"button",3),n.NdJ("click",function(){return e.addSI()}),n.qZA(),n.qZA(),n.TgZ(5,"div",1),n.TgZ(6,"p-table",4),n.YNc(7,bt,4,1,"ng-template",5),n.YNc(8,At,5,1,"ng-template",6),n.YNc(9,Tt,3,1,"ng-template",7),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"p-dialog",8),n.NdJ("visibleChange",function(t){return e.showAddSIDialog=t}),n.YNc(11,Ct,1,0,"ng-template",5),n.TgZ(12,"div",9),n.TgZ(13,"form",10),n.NdJ("submit",function(){return e.submitSIForm(e.siForm.value)}),n.TgZ(14,"div",11),n.TgZ(15,"span",12),n._UZ(16,"input",13),n.TgZ(17,"label",14),n._uU(18,"First Name"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(19,"div",11),n.TgZ(20,"span",12),n._UZ(21,"input",15),n.TgZ(22,"label",16),n._uU(23,"Last Name"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(24,"div",11),n.TgZ(25,"span",12),n._UZ(26,"input",17),n.TgZ(27,"label",18),n._uU(28,"Contact"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(29,"div",11),n.TgZ(30,"span",12),n._UZ(31,"input",19),n.TgZ(32,"label",20),n._uU(33,"E-mail"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"div",21),n.TgZ(35,"span",12),n._UZ(36,"input",22),n.TgZ(37,"label",23),n._uU(38,"Address"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",24),n.TgZ(40,"span",12),n._UZ(41,"input",25),n.TgZ(42,"label",26),n._uU(43,"City"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(44,"div",24),n.TgZ(45,"span",12),n._UZ(46,"p-dropdown",27),n.TgZ(47,"label",28),n._uU(48,"State"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(49,"div",24),n.TgZ(50,"span",12),n._UZ(51,"input",29),n.TgZ(52,"label",30),n._uU(53,"Pincode"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(54,"div",31),n.YNc(55,vt,2,0,"span",32),n.YNc(56,Ft,1,2,"ng-template",null,33,n.W1O),n.YNc(58,yt,1,1,"ng-template",null,34,n.W1O),n.qZA(),n.TgZ(60,"div",35),n.TgZ(61,"button",36),n.NdJ("click",function(){return e.showAddSIDialog=!1}),n.qZA(),n._UZ(62,"button",37),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(63,"p-toast")),2&t){const t=n.MAs(57);n.xp6(3),n.Q6J("routerLink",n.DdM(11,St)),n.xp6(3),n.Q6J("columns",e.cols)("value",e.allSI),n.xp6(4),n.Akn(n.DdM(12,Ut)),n.Q6J("visible",e.showAddSIDialog),n.xp6(3),n.Q6J("formGroup",e.siForm),n.xp6(33),n.Q6J("autoDisplayFirst",!1)("options",e.states),n.xp6(9),n.Q6J("ngIf",e.siFormSubmitted&&(e.siFormControls.address.errors&&e.siFormControls.address.errors.required||e.siFormControls.fname.errors&&e.siFormControls.fname.errors.required||e.siFormControls.lname.errors&&e.siFormControls.lname.errors.required||e.siFormControls.contact.errors&&e.siFormControls.contact.errors.required||e.siFormControls.email.errors&&e.siFormControls.email.errors.required||e.siFormControls.city.errors&&e.siFormControls.city.errors.required||e.siFormControls.state.errors&&e.siFormControls.state.errors.required||e.siFormControls.pincode.errors&&e.siFormControls.pincode.errors.required))("ngIfElse",t)}},directives:[j,g.Hq,h.H,i.rH,L.iA,u.jx,p.V,s._Y,s.JL,s.sg,s.Fj,m.o,s.JJ,s.u,Z.Lt,o.O5,b.FN,o.sg],styles:[""]}),t})();function kt(t,e){if(1&t&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.hij(" ",t.header," ")}}function It(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,kt,2,1,"th",38),n.TgZ(2,"th"),n._uU(3," Action "),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Q6J("ngForOf",t)}}function Nt(t,e){if(1&t&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&t){const t=e.$implicit,r=n.oxw().$implicit;n.xp6(1),n.hij(" ","name"==t.field?r.fname+" "+r.lname:"address"==t.field?r.address+", "+r.city+", "+r.pincode:r[t.field]," ")}}function Jt(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,Nt,2,1,"td",38),n.TgZ(2,"td"),n._UZ(3,"button",39),n._UZ(4,"button",40),n.qZA(),n.qZA()),2&t){const t=e.columns;n.xp6(1),n.Q6J("ngForOf",t)}}function Dt(t,e){if(1&t&&(n.TgZ(0,"tr"),n.TgZ(1,"td",41),n._uU(2," No Subadmin found. "),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.uIk("colspan",t.length+1)}}function Pt(t,e){1&t&&n._uU(0," Add Subadmin ")}function Yt(t,e){1&t&&(n.TgZ(0,"span",42),n._uU(1,"*Enter all the required fields"),n.qZA())}function Ot(t,e){1&t&&(n.TgZ(0,"span",42),n._uU(1,"Email is already in use. Please try another!"),n.qZA())}function Et(t,e){if(1&t&&n.YNc(0,Ot,2,0,"span",32),2&t){const t=n.oxw(),e=n.MAs(59);n.Q6J("ngIf",t.subadminFormSubmitted&&t.subadminFormControls.email.errors&&t.subadminFormControls.email.errors.exists)("ngIfElse",e)}}function Qt(t,e){1&t&&(n.TgZ(0,"span",42),n._uU(1,"Contact is already in use. Please try another!"),n.qZA())}function Mt(t,e){if(1&t&&n.YNc(0,Qt,2,0,"span",43),2&t){const t=n.oxw();n.Q6J("ngIf",t.subadminFormSubmitted&&t.subadminFormControls.contact.errors&&t.subadminFormControls.contact.errors.exists)}}const Bt=function(){return["/admin/dashboard"]},Rt=function(){return{width:"75vw"}},jt=[{path:"dashboard",component:gt},{path:"manage-subadmin",component:(()=>{class t{constructor(t,e,r){this.userService=t,this.fb=e,this.messageService=r,this.cols=[],this.showAddSubadminDialog=!1,this.states=[],this.subadminFormSubmitted=!1}ngOnInit(){this.cols=[{field:"name",header:"Name"},{field:"contact",header:"Contact"},{field:"email",header:"E-mail"},{field:"address",header:"Address"}],this.states=[{name:"Chhattisgarh",value:"Chhattisgarh"}],this.userService.getAllSubadmin().subscribe(t=>{console.log("all-subadmin",t),this.allSubadmin=t}),this.subadminForm=this.fb.group({fname:["",s.kI.required],lname:["",s.kI.required],contact:["",s.kI.required],email:["",s.kI.required],address:["",s.kI.required],city:["",s.kI.required],state:["",s.kI.required],pincode:["",s.kI.required]},{validator:this.checkContactAndEmail()})}checkContactAndEmail(){return t=>{const e=t.controls.email,r=t.controls.contact;this.userService.checkContactExists(r.value).subscribe(t=>{this.userService.checkEmailExists(e.value).subscribe(o=>{r.errors&&!r.errors.mustMatch||e.errors&&!e.errors.mustMatch||(r.setErrors("exists"==t.status?{exists:!0}:null),e.setErrors("exists"==o.status?{exists:!0}:null))})})}}addSubadmin(){this.subadminForm.reset(),this.subadminFormSubmitted=!1,this.showAddSubadminDialog=!0}submitSubadminForm(t){Object.keys(this.subadminFormControls).forEach(t=>{this.subadminFormControls[t].markAsDirty()}),this.subadminFormSubmitted=!0,this.subadminForm.valid&&this.userService.addSubadmin(t).subscribe(t=>{"success"==t.status&&(this.showAddSubadminDialog=!1,this.allSubadmin.unshift(t.subadmin),this.messageService.add({severity:"success",summary:"Success",detail:"Subadmin added successfully."}))},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.error.message})})}get subadminFormControls(){return this.subadminForm.controls}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(l.K),n.Y36(s.qu),n.Y36(u.ez))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-subadmin"]],features:[n._Bn([u.ez])],decls:64,vars:13,consts:[[1,"dashboard-page","p-grid"],[1,"p-col-12"],["pButton","","pRipple","","icon","pi pi-arrow-left","label","Go Back","type","button",1,"p-button-outlined","p-button-secondary",3,"routerLink"],["pButton","","pRipple","","icon","pi pi-user-add","label","Add Subadmin","type","button",1,"p-button-outlined",2,"float","right",3,"click"],["empty","",3,"columns","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"login-dialog",3,"visible","visibleChange"],[1,"p-grid","p-fluid","p-pt-4"],[2,"width","100%",3,"formGroup","submit"],[1,"p-field","p-d-inline-block","p-col-12","p-md-6"],[1,"p-float-label"],["type","text","id","fname","pInputText","","formControlName","fname"],["for","fname",1,"required"],["type","text","id","lname","pInputText","","formControlName","lname"],["for","lname",1,"required"],["type","text","id","contact","pInputText","","formControlName","contact"],["for","contact",1,"required"],["type","text","id","email","pInputText","","formControlName","email"],["for","email",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-12"],["type","text","id","address","pInputText","","formControlName","address"],["for","address",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-4"],["type","text","id","city","pInputText","","formControlName","city"],["for","city",1,"required"],["inputId","state","formControlName","state","optionLabel","name",3,"autoDisplayFirst","options"],["for","state",1,"required"],["type","text","id","pincode","pInputText","","formControlName","pincode"],["for","pincode",1,"required"],[1,"p-col-12","p-md-6","p-d-inline-block"],["class","p-error",4,"ngIf","ngIfElse"],["else1",""],["else2",""],[1,"p-col-12","p-md-6","p-d-inline-block","p-text-right"],["pButton","","pRipple","","label","Cancel","type","button",1,"p-button-outlined","p-button-secondary",2,"width","auto",3,"click"],["pButton","","pRipple","","label","Add","type","submit",1,"p-button-outlined",2,"width","auto","margin-left","15px"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-user-edit","type","button",1,"p-button-outlined","p-button-warning"],["pButton","","pRipple","","icon","pi pi-times","type","button",1,"p-button-danger","p-button-outlined","p-ml-3"],[1,"p-text-center"],[1,"p-error"],["class","p-error",4,"ngIf"]],template:function(t,e){if(1&t&&(n._UZ(0,"app-header"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n._UZ(3,"button",2),n.TgZ(4,"button",3),n.NdJ("click",function(){return e.addSubadmin()}),n.qZA(),n.qZA(),n.TgZ(5,"div",1),n.TgZ(6,"p-table",4),n.YNc(7,It,4,1,"ng-template",5),n.YNc(8,Jt,5,1,"ng-template",6),n.YNc(9,Dt,3,1,"ng-template",7),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"p-dialog",8),n.NdJ("visibleChange",function(t){return e.showAddSubadminDialog=t}),n.YNc(11,Pt,1,0,"ng-template",5),n.TgZ(12,"div",9),n.TgZ(13,"form",10),n.NdJ("submit",function(){return e.submitSubadminForm(e.subadminForm.value)}),n.TgZ(14,"div",11),n.TgZ(15,"span",12),n._UZ(16,"input",13),n.TgZ(17,"label",14),n._uU(18,"First Name"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(19,"div",11),n.TgZ(20,"span",12),n._UZ(21,"input",15),n.TgZ(22,"label",16),n._uU(23,"Last Name"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(24,"div",11),n.TgZ(25,"span",12),n._UZ(26,"input",17),n.TgZ(27,"label",18),n._uU(28,"Contact"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(29,"div",11),n.TgZ(30,"span",12),n._UZ(31,"input",19),n.TgZ(32,"label",20),n._uU(33,"E-mail"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"div",21),n.TgZ(35,"span",12),n._UZ(36,"input",22),n.TgZ(37,"label",23),n._uU(38,"Address"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",24),n.TgZ(40,"span",12),n._UZ(41,"input",25),n.TgZ(42,"label",26),n._uU(43,"City"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(44,"div",24),n.TgZ(45,"span",12),n._UZ(46,"p-dropdown",27),n.TgZ(47,"label",28),n._uU(48,"State"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(49,"div",24),n.TgZ(50,"span",12),n._UZ(51,"input",29),n.TgZ(52,"label",30),n._uU(53,"Pincode"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(54,"div",31),n.YNc(55,Yt,2,0,"span",32),n.YNc(56,Et,1,2,"ng-template",null,33,n.W1O),n.YNc(58,Mt,1,1,"ng-template",null,34,n.W1O),n.qZA(),n.TgZ(60,"div",35),n.TgZ(61,"button",36),n.NdJ("click",function(){return e.showAddSubadminDialog=!1}),n.qZA(),n._UZ(62,"button",37),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(63,"p-toast")),2&t){const t=n.MAs(57);n.xp6(3),n.Q6J("routerLink",n.DdM(11,Bt)),n.xp6(3),n.Q6J("columns",e.cols)("value",e.allSubadmin),n.xp6(4),n.Akn(n.DdM(12,Rt)),n.Q6J("visible",e.showAddSubadminDialog),n.xp6(3),n.Q6J("formGroup",e.subadminForm),n.xp6(33),n.Q6J("autoDisplayFirst",!1)("options",e.states),n.xp6(9),n.Q6J("ngIf",e.subadminFormSubmitted&&(e.subadminFormControls.address.errors&&e.subadminFormControls.address.errors.required||e.subadminFormControls.fname.errors&&e.subadminFormControls.fname.errors.required||e.subadminFormControls.lname.errors&&e.subadminFormControls.lname.errors.required||e.subadminFormControls.contact.errors&&e.subadminFormControls.contact.errors.required||e.subadminFormControls.email.errors&&e.subadminFormControls.email.errors.required||e.subadminFormControls.city.errors&&e.subadminFormControls.city.errors.required||e.subadminFormControls.state.errors&&e.subadminFormControls.state.errors.required||e.subadminFormControls.pincode.errors&&e.subadminFormControls.pincode.errors.required))("ngIfElse",t)}},directives:[j,g.Hq,h.H,i.rH,L.iA,u.jx,p.V,s._Y,s.JL,s.sg,s.Fj,m.o,s.JJ,s.u,Z.Lt,o.O5,b.FN,o.sg],styles:[""]}),t})()},{path:"manage-si",component:_t},{path:"manage-cameras",component:X},{path:"manage-dvrs",component:Zt},{path:"manage-plans",component:ht},{path:"cases/:status",component:ct},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"**",redirectTo:"dashboard",pathMatch:"full"}];let Lt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[i.Bz.forChild(jt)],i.Bz]}),t})();var $t=r(3581),Ht=r(6094);let Gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[o.ez,Lt,d.W6,lt.d,L.U$,g.hJ,h.T,p.S,s.UX,Z.kW,b.EV,m.j,$t.D,q.$,Ht.O,f.zz]]}),t})()}}]);