(self.webpackChunkblackbox=self.webpackChunkblackbox||[]).push([[332],{5332:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UserModule:()=>Ht});var o=i(1116),s=i(1462),n=i(8366),r=i(4833),a=i(8619),l=i(2250),u=i(2290),p=i(3022),c=i(7719),d=i(322),m=i(9892),h=i(6726),g=i(4568),f=i(6239),v=i(3454),Z=i(1146),b=i(1956);const C=function(){return[""]};function w(e,t){1&e&&a._UZ(0,"img",50),2&e&&a.Q6J("routerLink",a.DdM(1,C))}function y(e,t){1&e&&a._uU(0," Profile Details ")}function x(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"*Enter all the required fields"),a.qZA())}function T(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"Email is already in use. Please try another!"),a.qZA())}function q(e,t){if(1&e&&a.YNc(0,T,2,0,"span",52),2&e){const e=a.oxw();a.Q6J("ngIf",e.profileFormSubmitted&&e.profileFormControls.email.errors&&e.profileFormControls.email.errors.exists)}}function k(e,t){1&e&&a._uU(0," Change Password ")}function F(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"*Enter all the required fields"),a.qZA())}function I(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"Wrong current password!"),a.qZA())}function S(e,t){if(1&e&&a.YNc(0,I,2,0,"span",28),2&e){const e=a.oxw(),t=a.MAs(80);a.Q6J("ngIf",e.passwordFormSubmitted&&e.passwordFormControls.currPassword.errors&&e.passwordFormControls.currPassword.errors.mustMatch)("ngIfElse",t)}}function A(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"New password & Confirm new password do not match!"),a.qZA())}function U(e,t){if(1&e&&a.YNc(0,A,2,0,"span",52),2&e){const e=a.oxw();a.Q6J("ngIf",e.passwordFormSubmitted&&e.passwordFormControls.confirmNewPassword.errors&&e.passwordFormControls.confirmNewPassword.errors.mustMatch)}}function O(e,t){1&e&&a._uU(0," Change Contact ")}function N(e,t){if(1&e&&(a.TgZ(0,"div",58),a._uU(1),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.hij("Resend OTP in ",e.resendSecCount," seconds.")}}function E(e,t){1&e&&(a.TgZ(0,"p-messages",56),a.YNc(1,N,2,1,"ng-template",57),a.qZA())}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"a",59),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(2);return t.resendOTP(t.contactForm.value)}),a._uU(1,"Resend OTP"),a.qZA()}}function L(e,t){if(1&e&&(a.TgZ(0,"div",53),a.YNc(1,E,2,0,"p-messages",54),a.YNc(2,J,2,0,"a",55),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngIf",!e.showResend),a.xp6(1),a.Q6J("ngIf",e.showResend)}}function P(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"*Enter all the required fields"),a.qZA())}function _(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"Contact number already in use. Please try another!"),a.qZA())}function M(e,t){if(1&e&&a.YNc(0,_,2,0,"span",28),2&e){const e=a.oxw(),t=a.MAs(104);a.Q6J("ngIf",e.contactFormSubmitted&&e.contactFormControls.contact.errors&&e.contactFormControls.contact.errors.exists)("ngIfElse",t)}}function Y(e,t){1&e&&(a.TgZ(0,"span",51),a._uU(1,"Wrong OTP or contact number mismatched. Please try again!"),a.qZA())}function Q(e,t){if(1&e&&a.YNc(0,Y,2,0,"span",52),2&e){const e=a.oxw();a.Q6J("ngIf",e.contactFormSubmitted&&!e.contactFormControls.otp.errors&&e.invalidOTP)}}const D=function(){return{width:"50vw"}},H=function(){return{width:"45vw"}};let B=(()=>{class e{constructor(e,t,i,o,s){this.tokenService=e,this.router=t,this.fb=i,this.userService=o,this.messageService=s,this.items=[],this.profileFormSubmitted=!1,this.showProfileDialog=!1,this.states=[],this.passwordFormSubmitted=!1,this.showPasswordDialog=!1,this.contactFormSubmitted=!1,this.showContactDialog=!1,this.otpSent=!1,this.invalidOTP=!1,this.showResend=!1,this.resendSecCount=30}ngOnInit(){this.user=this.tokenService.getUser(),this.items=[{label:this.user.fname,icon:"pi pi-user",items:[{label:"Profile",icon:"pi pi-user-edit",command:this.editProfile.bind(this)},{label:"Logout",icon:"pi pi-power-off",command:this.logout.bind(this)}]}],this.states=[{name:"Chhattisgarh",value:"Chhattisgarh"}],this.profileForm=this.fb.group({fname:[this.user.fname,s.kI.required],lname:[this.user.lname,s.kI.required],contact:[this.user.contact,s.kI.required],email:[this.user.email,s.kI.required],address:[this.user.address,s.kI.required],city:[this.user.city,s.kI.required],state:[{name:this.user.state,value:this.user.state},s.kI.required],pincode:[this.user.pincode,s.kI.required]},{validator:this.checkEmail()}),this.passwordForm=this.fb.group({currPassword:["",s.kI.required],newPassword:["",s.kI.required],confirmNewPassword:["",s.kI.required]},{validator:this.MustMatch()}),this.contactForm=this.fb.group({contact:["",s.kI.required],otp:[""]},{validator:this.checkContact()})}editProfile(){this.user.plan?this.showProfileDialog=!0:this.messageService.add({severity:"warn",summary:"Warning",detail:"Please complete the initial setup first!"})}submitProfileForm(e){Object.keys(this.profileFormControls).forEach(e=>{this.profileFormControls[e].markAsDirty()}),this.profileFormSubmitted=!0,this.profileForm.valid&&this.userService.updateProfile(e).subscribe(e=>{e.contact?(e.accessToken=this.tokenService.getToken(),this.tokenService.saveUser(e),this.messageService.add({severity:"success",summary:"Success",detail:"Profile updated successfully."}),this.showProfileDialog=!1):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})})}editContact(){this.contactForm.reset(),this.contactFormSubmitted=!1,this.showContactDialog=!0}changePassword(){this.passwordForm.reset(),this.passwordFormSubmitted=!1,this.showPasswordDialog=!0}checkEmail(){return e=>{const t=e.controls.email;this.userService.checkEmailExists(t.value).subscribe(e=>{t.errors&&!t.errors.exists||t.setErrors("exists"==e.status?{exists:!0}:null)})}}MustMatch(){return e=>{const t=e.controls.newPassword,i=e.controls.confirmNewPassword,o=e.controls.currPassword;console.log("curr--\x3e ",o),console.log("new--\x3e ",t),console.log("confirm--\x3e ",o),this.userService.checkCurrPassword(o.value).subscribe(e=>{console.log("rrrr---\x3e> ",e),i.errors&&!i.errors.mustMatch||o.errors&&!o.errors.mustMatch||(i.setErrors(t.value!==i.value?{mustMatch:!0}:null),o.setErrors("match"==e.status?null:{mustMatch:!0}))})}}checkContact(){return e=>{const t=e.controls.contact;this.userService.checkContactExists(t.value).subscribe(e=>{t.errors&&!t.errors.exists||t.setErrors("exists"==e.status?{exists:!0}:null)})}}submitPasswordForm(e){Object.keys(this.passwordFormControls).forEach(e=>{this.passwordFormControls[e].markAsDirty()}),this.passwordFormSubmitted=!0,this.passwordForm.valid&&this.userService.updatePassword(e.newPassword).subscribe(e=>{"success"==e.status&&(this.messageService.add({severity:"success",summary:"Success",detail:"Password updated successfully."}),this.showPasswordDialog=!1)})}submitContactForm(e){Object.keys(this.contactFormControls).forEach(e=>{this.contactFormControls[e].markAsDirty()}),this.contactFormSubmitted=!0,this.contactForm.valid&&(this.otpSent?this.userService.updateContact(e.contact,e.otp.split("-").join("")).subscribe(t=>{t.contact?(t.accessToken=this.tokenService.getToken(),this.tokenService.saveUser(t),this.profileFormControls.contact.setValue(e.contact),this.messageService.add({severity:"success",summary:"Success",detail:"Contact updated successfully."}),this.showContactDialog=!1):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Wrong OTP or contact number mismatched. Please try again!"}),this.showContactDialog=!1}):this.userService.sendOTPForContactUpdate(e.contact).subscribe(e=>{console.log("rrrr",e),"success"==e.status&&(this.otpSent=!0,this.contactFormSubmitted=!1,this.contactFormControls.otp.setValidators([s.kI.required]),this.contactFormControls.otp.updateValueAndValidity(),this.startResendOtpTimer())}))}startResendOtpTimer(){this.showResend=!1,this.resendSecCount=30;var e=setInterval(()=>{this.resendSecCount--},1e3);setTimeout(()=>{clearInterval(e),this.showResend=!0},3e4)}resendOTP(e){this.userService.sendOTPForContactUpdate(e.contact).subscribe(e=>{console.log("rrrr",e),"success"==e.status&&this.startResendOtpTimer()})}get profileFormControls(){return this.profileForm.controls}get passwordFormControls(){return this.passwordForm.controls}get contactFormControls(){return this.contactForm.controls}logout(){this.tokenService.signOut(),this.router.navigate([""])}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(p.B),a.Y36(n.F0),a.Y36(s.qu),a.Y36(l.K),a.Y36(u.ez))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-header"]],features:[a._Bn([u.ez])],decls:109,vars:31,consts:[["styleClass","dashboard-menu",3,"model"],["pTemplate","start"],[1,"login-dialog",3,"visible","modal","visibleChange"],["pTemplate","header"],[1,"p-grid","p-fluid","p-pt-4"],[2,"width","100%",3,"formGroup","submit"],[1,"p-field","p-d-inline-block","p-col-12","p-md-6"],[1,"p-float-label"],["type","text","id","fname","pInputText","","formControlName","fname"],["for","fname",1,"required"],["type","text","id","lname","pInputText","","formControlName","lname"],["for","lname",1,"required"],["type","text","id","contact","pInputText","","formControlName","contact",2,"width","90%",3,"readOnly"],["for","contact",1,"required"],["pButton","","type","button","icon","pi pi-pencil","title","Edit Contact",1,"p-button-text","p-button-warning",2,"width","9%",3,"click"],["type","text","id","email","pInputText","","formControlName","email"],["for","email",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-12"],["type","text","id","address","pInputText","","formControlName","address"],["for","address",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-4"],["type","text","id","city","pInputText","","formControlName","city"],["for","city",1,"required"],["inputId","state","formControlName","state","optionLabel","name",3,"autoDisplayFirst","options"],["for","state",1,"required"],["type","text","id","pincode","pInputText","","formControlName","pincode"],["for","pincode",1,"required"],[1,"p-col-12","p-md-12","p-d-inline-block"],["class","p-error",4,"ngIf","ngIfElse"],["else1",""],[1,"p-col-12","p-md-6","p-d-inline-block"],["pButton","","pRipple","","label","Change Password","icon","pi pi-unlock","type","button",1,"p-button-outlined","p-button-help",2,"width","auto",3,"click"],[1,"p-col-12","p-md-6","p-text-right","p-d-inline-block"],["pButton","","pRipple","","label","Cancel","type","button",1,"p-button-outlined","p-button-secondary",2,"width","auto",3,"click"],["pButton","","pRipple","","label","Update","type","submit",1,"p-button-outlined",2,"width","auto","margin-left","15px"],["type","text","id","currPassword","pInputText","","formControlName","currPassword"],["for","currPassword",1,"required"],["type","text","id","newPassword","pInputText","","formControlName","newPassword"],["for","newPassword",1,"required"],["type","text","id","confirmNewPassword","pInputText","","formControlName","confirmNewPassword"],["for","confirmNewPassword",1,"required"],["else2",""],["else3",""],["type","text","id","contact","pInputText","","formControlName","contact"],["id","otp","mask","9-9-9-9","formControlName","otp",3,"disabled"],["for","otp",1,"required"],["class","p-col-12",4,"ngIf"],["else4",""],["else5",""],["pButton","","pRipple","","type","submit",1,"p-button-outlined",2,"width","auto","margin-left","15px",3,"label"],["src","assets/landing/logo.svg",1,"p-mr-2",2,"cursor","pointer",3,"routerLink"],[1,"p-error"],["class","p-error",4,"ngIf"],[1,"p-col-12"],["severity","info",4,"ngIf"],["href","javascript:;","style","color: #fff;",3,"click",4,"ngIf"],["severity","info"],["pTemplate",""],[1,"p-ml-2"],["href","javascript:;",2,"color","#fff",3,"click"]],template:function(e,t){if(1&e&&(a.TgZ(0,"p-menubar",0),a.YNc(1,w,1,2,"ng-template",1),a.qZA(),a.TgZ(2,"p-dialog",2),a.NdJ("visibleChange",function(e){return t.showProfileDialog=e}),a.YNc(3,y,1,0,"ng-template",3),a.TgZ(4,"div",4),a.TgZ(5,"form",5),a.NdJ("submit",function(){return t.submitProfileForm(t.profileForm.value)}),a.TgZ(6,"div",6),a.TgZ(7,"span",7),a._UZ(8,"input",8),a.TgZ(9,"label",9),a._uU(10,"First Name"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",6),a.TgZ(12,"span",7),a._UZ(13,"input",10),a.TgZ(14,"label",11),a._uU(15,"Last Name"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",6),a.TgZ(17,"span",7),a._UZ(18,"input",12),a.TgZ(19,"label",13),a._uU(20,"Contact"),a.qZA(),a.TgZ(21,"button",14),a.NdJ("click",function(){return t.editContact()}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"div",6),a.TgZ(23,"span",7),a._UZ(24,"input",15),a.TgZ(25,"label",16),a._uU(26,"E-mail"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(27,"div",17),a.TgZ(28,"span",7),a._UZ(29,"input",18),a.TgZ(30,"label",19),a._uU(31,"Address"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(32,"div",20),a.TgZ(33,"span",7),a._UZ(34,"input",21),a.TgZ(35,"label",22),a._uU(36,"City"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(37,"div",20),a.TgZ(38,"span",7),a._UZ(39,"p-dropdown",23),a.TgZ(40,"label",24),a._uU(41,"State"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(42,"div",20),a.TgZ(43,"span",7),a._UZ(44,"input",25),a.TgZ(45,"label",26),a._uU(46,"Pincode"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(47,"div",27),a.YNc(48,x,2,0,"span",28),a.YNc(49,q,1,1,"ng-template",null,29,a.W1O),a.qZA(),a.TgZ(51,"div",30),a.TgZ(52,"button",31),a.NdJ("click",function(){return t.changePassword()}),a.qZA(),a.qZA(),a.TgZ(53,"div",32),a.TgZ(54,"button",33),a.NdJ("click",function(){return t.showProfileDialog=!1}),a.qZA(),a._UZ(55,"button",34),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(56,"p-dialog",2),a.NdJ("visibleChange",function(e){return t.showPasswordDialog=e}),a.YNc(57,k,1,0,"ng-template",3),a.TgZ(58,"div",4),a.TgZ(59,"form",5),a.NdJ("submit",function(){return t.submitPasswordForm(t.passwordForm.value)}),a.TgZ(60,"div",17),a.TgZ(61,"span",7),a._UZ(62,"input",35),a.TgZ(63,"label",36),a._uU(64,"Current Password"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(65,"div",17),a.TgZ(66,"span",7),a._UZ(67,"input",37),a.TgZ(68,"label",38),a._uU(69,"New Password"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(70,"div",17),a.TgZ(71,"span",7),a._UZ(72,"input",39),a.TgZ(73,"label",40),a._uU(74,"Confirm New Password"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(75,"div",30),a.YNc(76,F,2,0,"span",28),a.YNc(77,S,1,2,"ng-template",null,41,a.W1O),a.YNc(79,U,1,1,"ng-template",null,42,a.W1O),a.qZA(),a.TgZ(81,"div",32),a.TgZ(82,"button",33),a.NdJ("click",function(){return t.showPasswordDialog=!1}),a.qZA(),a._UZ(83,"button",34),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(84,"p-dialog",2),a.NdJ("visibleChange",function(e){return t.showContactDialog=e}),a.YNc(85,O,1,0,"ng-template",3),a.TgZ(86,"div",4),a.TgZ(87,"form",5),a.NdJ("submit",function(){return t.submitContactForm(t.contactForm.value)}),a.TgZ(88,"div",17),a.TgZ(89,"span",7),a._UZ(90,"input",43),a.TgZ(91,"label",13),a._uU(92,"Contact"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(93,"div",17),a.TgZ(94,"span",7),a._UZ(95,"p-inputMask",44),a.TgZ(96,"label",45),a._uU(97,"OTP"),a.qZA(),a.qZA(),a.qZA(),a.YNc(98,L,3,2,"div",46),a.TgZ(99,"div",30),a.YNc(100,P,2,0,"span",28),a.YNc(101,M,1,2,"ng-template",null,47,a.W1O),a.YNc(103,Q,1,1,"ng-template",null,48,a.W1O),a.qZA(),a.TgZ(105,"div",32),a.TgZ(106,"button",33),a.NdJ("click",function(){return t.showContactDialog=!1}),a.qZA(),a._UZ(107,"button",49),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(108,"p-toast")),2&e){const e=a.MAs(50),i=a.MAs(78),o=a.MAs(102);a.Q6J("model",t.items),a.xp6(2),a.Akn(a.DdM(28,D)),a.Q6J("visible",t.showProfileDialog)("modal",!0),a.xp6(3),a.Q6J("formGroup",t.profileForm),a.xp6(13),a.Q6J("readOnly",!0),a.xp6(21),a.Q6J("autoDisplayFirst",!1)("options",t.states),a.xp6(9),a.Q6J("ngIf",t.profileFormSubmitted&&(t.profileFormControls.address.errors&&t.profileFormControls.address.errors.required||t.profileFormControls.fname.errors&&t.profileFormControls.fname.errors.required||t.profileFormControls.lname.errors&&t.profileFormControls.lname.errors.required||t.profileFormControls.contact.errors&&t.profileFormControls.contact.errors.required||t.profileFormControls.email.errors&&t.profileFormControls.email.errors.required||t.profileFormControls.city.errors&&t.profileFormControls.city.errors.required||t.profileFormControls.state.errors&&t.profileFormControls.state.errors.required||t.profileFormControls.pincode.errors&&t.profileFormControls.pincode.errors.required))("ngIfElse",e),a.xp6(8),a.Akn(a.DdM(29,H)),a.Q6J("visible",t.showPasswordDialog)("modal",!0),a.xp6(3),a.Q6J("formGroup",t.passwordForm),a.xp6(17),a.Q6J("ngIf",t.passwordFormSubmitted&&(t.passwordFormControls.currPassword.errors&&t.passwordFormControls.currPassword.errors.required||t.passwordFormControls.newPassword.errors&&t.passwordFormControls.newPassword.errors.required||t.passwordFormControls.confirmNewPassword.errors&&t.passwordFormControls.confirmNewPassword.errors.required))("ngIfElse",i),a.xp6(8),a.Akn(a.DdM(30,H)),a.Q6J("visible",t.showContactDialog)("modal",!0),a.xp6(3),a.Q6J("formGroup",t.contactForm),a.xp6(8),a.Q6J("disabled",!t.otpSent),a.xp6(3),a.Q6J("ngIf",t.otpSent),a.xp6(2),a.Q6J("ngIf",t.contactFormSubmitted&&(t.contactFormControls.contact.errors&&t.contactFormControls.contact.errors.required||t.contactFormControls.otp.errors&&t.contactFormControls.otp.errors.required))("ngIfElse",o),a.xp6(7),a.s9C("label",t.otpSent?"Update":"Send OTP")}},directives:[c.nm,u.jx,d.V,s._Y,s.JL,s.sg,s.Fj,m.o,s.JJ,s.u,h.Hq,g.Lt,o.O5,f.H,v.vy,Z.FN,n.rH,b.V],styles:[""]}),e})();var G=i(9065);function V(e,t){if(1&e&&(a.TgZ(0,"th"),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.hij(" ",e.header," ")}}function R(e,t){if(1&e&&(a.TgZ(0,"tr"),a.YNc(1,V,2,1,"th",7),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("ngForOf",e)}}function z(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",9),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(2).$implicit;return a.oxw().openImage(t.image)}),a.qZA()}}function W(e,t){if(1&e&&(a.TgZ(0,"td"),a._uU(1),a.YNc(2,z,1,0,"button",8),a.qZA()),2&e){const e=t.$implicit,i=a.oxw().$implicit;a.xp6(1),a.hij(" ","si"==e.field?i.si.fname+" "+i.si.lname:"siContact"==e.field?i.si.contact:"siEmail"==e.field?i.si.email:"image"!==e.field?i[e.field]:""," "),a.xp6(1),a.Q6J("ngIf","image"==e.field&&"Motion Detection"==i.name)}}function $(e,t){if(1&e&&(a.TgZ(0,"tr"),a.YNc(1,W,3,2,"td",7),a.qZA()),2&e){const e=t.columns;a.xp6(1),a.Q6J("ngForOf",e)}}function j(e,t){if(1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"td",10),a._uU(2," No case found. "),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.uIk("colspan",e.length)}}const K=function(){return["/user/dashboard"]};let X=(()=>{class e{constructor(e,t,i,o){this.route=e,this.userService=t,this.router=i,this.window=o,this.cols=[],this.cases=[]}ngOnInit(){this.cols=[{field:"name",header:"Case"},{field:"si",header:"SI"},{field:"siContact",header:"SI Contact"},{field:"siEmail",header:"SI Email"},{field:"createdAt",header:"Date/Time"},{field:"image",header:"Image"}],this.caseStatusSub=this.route.params.subscribe(e=>this.caseStatus=e.status),"new"==this.caseStatus?this.userService.getUserCases("new").subscribe(e=>{this.cases=e.cases}):"open"==this.caseStatus?this.userService.getUserCases("open").subscribe(e=>{this.cases=e.cases}):"closed"==this.caseStatus?this.userService.getUserCases("closed").subscribe(e=>{this.cases=e.cases}):this.router.navigate(["/user/dashboard"])}openImage(e){console.log("host",e);const t=this.window.open(e,"_blank");t&&t.focus()}ngOnDestroy(){this.caseStatusSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(n.gz),a.Y36(l.K),a.Y36(n.F0),a.Y36(r.m))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-case"]],decls:9,vars:4,consts:[[1,"dashboard-page","p-grid"],[1,"p-col-12"],["pButton","","pRipple","","icon","pi pi-arrow-left","label","Go Back","type","button",1,"p-button-outlined","p-button-secondary",3,"routerLink"],[3,"columns","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","class","p-button-outlined p-button-rounded p-button-info","icon","pi pi-image","type","button",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-image","type","button",1,"p-button-outlined","p-button-rounded","p-button-info",3,"click"],[1,"p-text-center"]],template:function(e,t){1&e&&(a._UZ(0,"app-header"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a._UZ(3,"button",2),a.qZA(),a.TgZ(4,"div",1),a.TgZ(5,"p-table",3),a.YNc(6,R,2,1,"ng-template",4),a.YNc(7,$,2,1,"ng-template",5),a.YNc(8,j,3,1,"ng-template",6),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.Q6J("routerLink",a.DdM(3,K)),a.xp6(2),a.Q6J("columns",t.cols)("value",t.cases))},directives:[B,h.Hq,f.H,n.rH,G.iA,u.jx,o.sg,o.O5],styles:[""]}),e})();var ee=i(8751);const te=function(){return["/user/cases/new"]},ie=function(){return["/user/cases/open"]},oe=function(){return["/user/cases/closed"]};let se=(()=>{class e{constructor(e,t,i){this.userService=e,this.tokenService=t,this.router=i,this.profileComplete=!0;let o=this.tokenService.getUser();console.log("user",o);let s="";o.si?o.email?o.cameras.length?o.plan||(s="user/init-setup/plan",this.profileComplete=!1):(s="/user/init-setup/camera",this.profileComplete=!1):(s="/user/init-setup/pi",this.profileComplete=!1):(s="/user/init-setup/si",this.profileComplete=!1),this.profileComplete||this.router.navigate([s])}ngOnInit(){this.userService.getUserDashboardData().subscribe(e=>{console.log("dashCounts",e),this.dashboardData=e})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.K),a.Y36(p.B),a.Y36(n.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-dashboard"]],decls:21,vars:9,consts:[[1,"p-grid","dashboard-page"],[1,"p-col-4","p-text-center"],[3,"routerLink"],[1,"p-col-2"]],template:function(e,t){1&e&&(a._UZ(0,"app-header"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a.TgZ(3,"p-card",2),a.TgZ(4,"h1"),a._uU(5,"New Cases"),a.qZA(),a.TgZ(6,"h3"),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"div",1),a.TgZ(9,"p-card",2),a.TgZ(10,"h1"),a._uU(11,"Open Cases"),a.qZA(),a.TgZ(12,"h3"),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",1),a.TgZ(15,"p-card",2),a.TgZ(16,"h1"),a._uU(17,"Closed Cases"),a.qZA(),a.TgZ(18,"h3"),a._uU(19),a.qZA(),a.qZA(),a.qZA(),a._UZ(20,"div",3),a.qZA()),2&e&&(a.xp6(3),a.Q6J("routerLink",a.DdM(6,te)),a.xp6(4),a.Oqu(t.dashboardData?t.dashboardData.newCaseCount:0),a.xp6(2),a.Q6J("routerLink",a.DdM(7,ie)),a.xp6(4),a.Oqu(t.dashboardData?t.dashboardData.openCaseCount:0),a.xp6(2),a.Q6J("routerLink",a.DdM(8,oe)),a.xp6(4),a.Oqu(t.dashboardData?t.dashboardData.closedCaseCount:0))},directives:[B,ee.Z,n.rH],styles:[""]}),e})();var ne=i(2693);const re="http://"+window.location.host+"/api/plan/";new ne.WM({"Content-Type":"application/json"});let ae=(()=>{class e{constructor(e){this.http=e}getAllPlans(){return this.http.get(re+"all-plan")}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(ne.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var le=i(433);const ue="http://"+window.location.host+"/api/dvr/";new ne.WM({"Content-Type":"application/json"});let pe=(()=>{class e{constructor(e){this.http=e}getAllDvrs(){return this.http.get(ue+"all-dvr")}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(ne.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ce(e,t){if(1&e&&(a.TgZ(0,"span",11),a._uU(1),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Oqu(e.label)}}function de(e,t){if(1&e&&a._UZ(0,"span",12),2&e){const e=a.oxw(2).$implicit;a.Q6J("innerHTML",e.label,a.oJD)}}const me=function(){return{exact:!1}};function he(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"a",7),a.NdJ("click",function(t){a.CHM(e);const i=a.oxw(),o=i.$implicit,s=i.index;return a.oxw().itemClick(t,o,s)})("keydown.enter",function(t){a.CHM(e);const i=a.oxw(),o=i.$implicit,s=i.index;return a.oxw().itemClick(t,o,s)}),a.TgZ(1,"span",8),a._uU(2),a.qZA(),a.YNc(3,ce,2,1,"span",9),a.YNc(4,de,1,1,"ng-template",null,10,a.W1O),a.qZA()}if(2&e){const e=a.MAs(5),t=a.oxw(),i=t.$implicit,o=t.index,s=a.oxw();a.Q6J("routerLink",i.routerLink)("queryParams",i.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",i.routerLinkActiveOptions||a.DdM(16,me))("fragment",i.fragment)("queryParamsHandling",i.queryParamsHandling)("preserveFragment",i.preserveFragment)("skipLocationChange",i.skipLocationChange)("replaceUrl",i.replaceUrl)("state",i.state),a.uIk("target",i.target)("id",i.id)("tabindex",i.disabled||s.readonly?null:i.tabindex?i.tabindex:"0"),a.xp6(2),a.Oqu(o+1),a.xp6(1),a.Q6J("ngIf",!1!==i.escape)("ngIfElse",e)}}function ge(e,t){if(1&e&&(a.TgZ(0,"span",11),a._uU(1),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Oqu(e.label)}}function fe(e,t){if(1&e&&a._UZ(0,"span",12),2&e){const e=a.oxw(2).$implicit;a.Q6J("innerHTML",e.label,a.oJD)}}function ve(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"a",13),a.NdJ("click",function(t){a.CHM(e);const i=a.oxw(),o=i.$implicit,s=i.index;return a.oxw().itemClick(t,o,s)})("keydown.enter",function(t){a.CHM(e);const i=a.oxw(),o=i.$implicit,s=i.index;return a.oxw().itemClick(t,o,s)}),a.TgZ(1,"span",8),a._uU(2),a.qZA(),a.YNc(3,ge,2,1,"span",9),a.YNc(4,fe,1,1,"ng-template",null,14,a.W1O),a.qZA()}if(2&e){const e=a.MAs(5),t=a.oxw(),i=t.$implicit,o=t.index,s=a.oxw();a.uIk("href",i.url,a.LSH)("target",i.target)("id",i.id)("tabindex",i.disabled||o!==s.activeIndex&&s.readonly?null:i.tabindex?i.tabindex:"0"),a.xp6(2),a.Oqu(o+1),a.xp6(1),a.Q6J("ngIf",!1!==i.escape)("ngIfElse",e)}}const Ze=function(e,t){return{"p-highlight p-steps-current":e,"p-disabled":t}};function be(e,t){if(1&e&&(a.TgZ(0,"li",3,4),a.YNc(2,he,6,17,"a",5),a.YNc(3,ve,6,7,"ng-template",null,6,a.W1O),a.qZA()),2&e){const e=t.$implicit,i=t.index,o=a.MAs(4),s=a.oxw();a.Tol(e.styleClass),a.Q6J("ngStyle",e.style)("ngClass",a.WLB(8,Ze,s.isActive(e,i),e.disabled||s.readonly&&!s.isActive(e,i))),a.uIk("aria-selected",i===s.activeIndex)("aria-expanded",i===s.activeIndex),a.xp6(2),a.Q6J("ngIf",s.isClickableRouterLink(e))("ngIfElse",o)}}const Ce=function(e){return{"p-steps p-component":!0,"p-readonly":e}};let we=(()=>{class e{constructor(e,t,i){this.router=e,this.route=t,this.cd=i,this.activeIndex=0,this.readonly=!0,this.activeIndexChange=new a.vpe}ngOnInit(){this.subscription=this.router.events.subscribe(()=>this.cd.markForCheck())}itemClick(e,t,i){this.readonly||t.disabled?e.preventDefault():(this.activeIndexChange.emit(i),t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t,index:i}))}isClickableRouterLink(e){return e.routerLink&&!this.readonly&&!e.disabled}isActive(e,t){return e.routerLink?this.router.isActive(e.routerLink,!1)||this.router.isActive(this.router.createUrlTree([e.routerLink],{relativeTo:this.route}).toString(),!1):t===this.activeIndex}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(n.F0),a.Y36(n.gz),a.Y36(a.sBO))},e.\u0275cmp=a.Xpm({type:e,selectors:[["p-steps"]],inputs:{activeIndex:"activeIndex",model:"model",readonly:"readonly",style:"style",styleClass:"styleClass"},outputs:{activeIndexChange:"activeIndexChange"},decls:3,vars:7,consts:[[3,"ngClass","ngStyle"],["role","tablist"],["class","p-steps-item","role","tab",3,"ngStyle","class","ngClass",4,"ngFor","ngForOf"],["role","tab",1,"p-steps-item",3,"ngStyle","ngClass"],["menuitem",""],["role","presentation","class","p-menuitem-link",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["role","presentation",1,"p-menuitem-link",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],[1,"p-steps-number"],["class","p-steps-title",4,"ngIf","ngIfElse"],["htmlLabel",""],[1,"p-steps-title"],[1,"p-steps-title",3,"innerHTML"],["role","presentation",1,"p-menuitem-link",3,"click","keydown.enter"],["htmlRouteLabel",""]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"ul",1),a.YNc(2,be,5,11,"li",2),a.qZA(),a.qZA()),2&e&&(a.Tol(t.styleClass),a.Q6J("ngClass",a.VKq(5,Ce,t.readonly))("ngStyle",t.style),a.xp6(2),a.Q6J("ngForOf",t.model))},directives:[o.mk,o.PC,o.sg,o.O5,n.yS,n.Od],styles:[".p-steps{position:relative}.p-steps ul{padding:0;margin:0;list-style-type:none;display:flex}.p-steps-item{position:relative;display:flex;justify-content:center;flex:1 1 auto}.p-steps-item .p-menuitem-link{display:inline-flex;flex-direction:column;align-items:center;overflow:hidden;text-decoration:none}.p-steps.p-steps-readonly .p-steps-item{cursor:auto}.p-steps-item.p-steps-current .p-menuitem-link{cursor:default}.p-steps-title{white-space:nowrap}.p-steps-number{display:flex;align-items:center;justify-content:center}.p-steps-title{display:block}"],encapsulation:2,changeDetection:0}),e})(),ye=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.ez,n.Bz],n.Bz]}),e})();var xe=i(9713),Te=i(250),qe=i(8807),ke=i(2600);const Fe=["container"],Ie=["in"],Se=["multiIn"],Ae=["multiContainer"],Ue=["ddBtn"],Oe=function(e,t){return{"p-autocomplete-dd-input":e,"p-disabled":t}};function Ne(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"input",7,8),a.NdJ("click",function(t){return a.CHM(e),a.oxw().onInputClick(t)})("input",function(t){return a.CHM(e),a.oxw().onInput(t)})("keydown",function(t){return a.CHM(e),a.oxw().onKeydown(t)})("keyup",function(t){return a.CHM(e),a.oxw().onKeyup(t)})("focus",function(t){return a.CHM(e),a.oxw().onInputFocus(t)})("blur",function(t){return a.CHM(e),a.oxw().onInputBlur(t)})("change",function(t){return a.CHM(e),a.oxw().onInputChange(t)})("paste",function(t){return a.CHM(e),a.oxw().onInputPaste(t)}),a.qZA()}if(2&e){const e=a.oxw();a.Tol(e.inputStyleClass),a.Q6J("ngStyle",e.inputStyle)("autocomplete",e.autocomplete)("ngClass",a.WLB(23,Oe,e.dropdown,e.disabled))("value",e.inputFieldValue)("readonly",e.readonly)("disabled",e.disabled),a.uIk("type",e.type)("id",e.inputId)("required",e.required)("name",e.name)("aria-controls",e.listId)("aria-expanded",e.overlayVisible)("aria-activedescendant","p-highlighted-option")("autofocus",e.autofocus)("placeholder",e.placeholder)("size",e.size)("maxlength",e.maxlength)("tabindex",e.tabindex)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy)("aria-required",e.required)}}function Ee(e,t){1&e&&a.GkF(0)}function Je(e,t){if(1&e&&(a.TgZ(0,"span",20),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit,t=a.oxw(2);a.xp6(1),a.Oqu(t.resolveFieldData(e))}}function Le(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"span",21),a.NdJ("click",function(){a.CHM(e),a.oxw();const t=a.MAs(1);return a.oxw(2).removeItem(t)}),a.qZA()}}const Pe=function(e){return{$implicit:e}};function _e(e,t){if(1&e&&(a.TgZ(0,"li",15,16),a.YNc(2,Ee,1,0,"ng-container",17),a.YNc(3,Je,2,1,"span",18),a.YNc(4,Le,1,0,"span",19),a.qZA()),2&e){const e=t.$implicit,i=a.oxw(2);a.xp6(2),a.Q6J("ngTemplateOutlet",i.selectedItemTemplate)("ngTemplateOutletContext",a.VKq(4,Pe,e)),a.xp6(1),a.Q6J("ngIf",!i.selectedItemTemplate),a.xp6(1),a.Q6J("ngIf",!i.disabled&&!i.readonly)}}const Me=function(e,t){return{"p-disabled":e,"p-focus":t}};function Ye(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ul",9,10),a.NdJ("click",function(){return a.CHM(e),a.MAs(5).focus()}),a.YNc(2,_e,5,6,"li",11),a.TgZ(3,"li",12),a.TgZ(4,"input",13,14),a.NdJ("input",function(t){return a.CHM(e),a.oxw().onInput(t)})("click",function(t){return a.CHM(e),a.oxw().onInputClick(t)})("keydown",function(t){return a.CHM(e),a.oxw().onKeydown(t)})("keyup",function(t){return a.CHM(e),a.oxw().onKeyup(t)})("focus",function(t){return a.CHM(e),a.oxw().onInputFocus(t)})("blur",function(t){return a.CHM(e),a.oxw().onInputBlur(t)})("change",function(t){return a.CHM(e),a.oxw().onInputChange(t)})("paste",function(t){return a.CHM(e),a.oxw().onInputPaste(t)}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("ngClass",a.WLB(20,Me,e.disabled,e.focus)),a.xp6(2),a.Q6J("ngForOf",e.value),a.xp6(2),a.Tol(e.inputStyleClass),a.Q6J("disabled",e.disabled)("readonly",e.readonly)("autocomplete",e.autocomplete)("ngStyle",e.inputStyle),a.uIk("type",e.type)("id",e.inputId)("placeholder",e.value&&e.value.length?null:e.placeholder)("tabindex",e.tabindex)("maxlength",e.maxlength)("autofocus",e.autofocus)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy)("aria-required",e.required)("aria-controls",e.listId)("aria-expanded",e.overlayVisible)("aria-activedescendant","p-highlighted-option")}}function Qe(e,t){1&e&&a._UZ(0,"i",22)}function De(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",23,24),a.NdJ("click",function(t){return a.CHM(e),a.oxw().handleDropdownClick(t)}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("icon",e.dropdownIcon)("disabled",e.disabled),a.uIk("tabindex",e.tabindex)}}function He(e,t){1&e&&a.GkF(0)}function Be(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(1),a.Oqu(t.getOptionGroupLabel(e)||"empty")}}function Ge(e,t){1&e&&a.GkF(0)}function Ve(e,t){1&e&&a.GkF(0)}function Re(e,t){if(1&e&&(a.TgZ(0,"li",31),a.YNc(1,Be,2,1,"span",28),a.YNc(2,Ge,1,0,"ng-container",17),a.qZA(),a.YNc(3,Ve,1,0,"ng-container",17)),2&e){const e=t.$implicit;a.oxw(2);const i=a.MAs(7),o=a.oxw();a.xp6(1),a.Q6J("ngIf",!o.groupTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",o.groupTemplate)("ngTemplateOutletContext",a.VKq(5,Pe,e)),a.xp6(1),a.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",a.VKq(7,Pe,o.getOptionGroupChildren(e)))}}function ze(e,t){if(1&e&&(a.ynx(0),a.YNc(1,Re,4,9,"ng-template",30),a.BQk()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",e.suggestions)}}function We(e,t){1&e&&a.GkF(0)}function $e(e,t){if(1&e&&(a.ynx(0),a.YNc(1,We,1,0,"ng-container",17),a.BQk()),2&e){a.oxw();const e=a.MAs(7),t=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",a.VKq(2,Pe,t.suggestions))}}function je(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit,t=a.oxw(4);a.xp6(1),a.Oqu(t.resolveFieldData(e))}}function Ke(e,t){1&e&&a.GkF(0)}const Xe=function(e){return{"p-highlight":e}},et=function(e,t){return{$implicit:e,index:t}};function tt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"li",36),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(4).selectItem(t)}),a.YNc(1,je,2,1,"span",28),a.YNc(2,Ke,1,0,"ng-container",17),a.qZA()}if(2&e){const e=t.$implicit,i=t.index,o=a.oxw(4);a.Q6J("ngClass",a.VKq(5,Xe,e===o.highlightOption))("id",o.highlightOption==e?"p-highlighted-option":""),a.xp6(1),a.Q6J("ngIf",!o.itemTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",o.itemTemplate)("ngTemplateOutletContext",a.WLB(7,et,e,i))}}function it(e,t){if(1&e&&(a.ynx(0),a.YNc(1,tt,3,10,"li",35),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",e)}}function ot(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit,t=a.oxw(5);a.xp6(1),a.Oqu(t.resolveFieldData(e))}}function st(e,t){1&e&&a.GkF(0)}const nt=function(e){return{height:e}};function rt(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"li",40),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(5).selectItem(t)}),a.YNc(2,ot,2,1,"span",28),a.YNc(3,st,1,0,"ng-container",17),a.qZA(),a.BQk()}if(2&e){const e=t.$implicit,i=t.index,o=a.oxw(5);a.xp6(1),a.Q6J("ngClass",a.VKq(6,Xe,e===o.highlightOption))("ngStyle",a.VKq(8,nt,o.itemSize+"px"))("id",o.highlightOption==e?"p-highlighted-option":""),a.xp6(1),a.Q6J("ngIf",!o.itemTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",o.itemTemplate)("ngTemplateOutletContext",a.WLB(10,et,e,i))}}function at(e,t){if(1&e&&(a.TgZ(0,"cdk-virtual-scroll-viewport",38),a.YNc(1,rt,4,13,"ng-container",39),a.qZA()),2&e){const e=a.oxw(2).$implicit,t=a.oxw(2);a.Q6J("ngStyle",a.VKq(3,nt,t.scrollHeight))("itemSize",t.itemSize),a.xp6(1),a.Q6J("cdkVirtualForOf",e)}}function lt(e,t){if(1&e&&a.YNc(0,at,2,5,"cdk-virtual-scroll-viewport",37),2&e){const e=a.oxw(3);a.Q6J("ngIf",e.virtualScroll&&!e.noResults)}}function ut(e,t){if(1&e&&(a.ynx(0),a._uU(1),a.BQk()),2&e){const e=a.oxw(4);a.xp6(1),a.hij(" ",e.emptyMessageLabel," ")}}function pt(e,t){1&e&&a.GkF(0,null,42)}function ct(e,t){if(1&e&&(a.TgZ(0,"li",41),a.YNc(1,ut,2,1,"ng-container",32),a.YNc(2,pt,2,0,"ng-container",26),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.Q6J("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),a.xp6(1),a.Q6J("ngTemplateOutlet",e.emptyTemplate)}}function dt(e,t){if(1&e&&(a.YNc(0,it,2,1,"ng-container",32),a.YNc(1,lt,1,1,"ng-template",null,33,a.W1O),a.YNc(3,ct,3,3,"li",34)),2&e){const e=a.MAs(2),t=a.oxw(2);a.Q6J("ngIf",!t.virtualScroll)("ngIfElse",e),a.xp6(3),a.Q6J("ngIf",t.noResults&&t.showEmptyMessage)}}function mt(e,t){1&e&&a.GkF(0)}const ht=function(){return["p-autocomplete-panel p-component"]},gt=function(e,t){return{showTransitionParams:e,hideTransitionParams:t}},ft=function(e){return{value:"visible",params:e}},vt=function(e){return{"p-autocomplete-virtualscroll":e}};function Zt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0,25),a.NdJ("@overlayAnimation.start",function(t){return a.CHM(e),a.oxw().onOverlayAnimationStart(t)}),a.YNc(2,He,1,0,"ng-container",26),a.TgZ(3,"ul",27),a.YNc(4,ze,2,1,"ng-container",28),a.YNc(5,$e,2,4,"ng-container",28),a.YNc(6,dt,4,3,"ng-template",null,29,a.W1O),a.qZA(),a.YNc(8,mt,1,0,"ng-container",26),a.qZA()}if(2&e){const e=a.oxw();a.Tol(e.panelStyleClass),a.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight),a.Q6J("ngClass",a.DdM(13,ht))("ngStyle",e.panelStyle)("@overlayAnimation",a.VKq(17,ft,a.WLB(14,gt,e.showTransitionOptions,e.hideTransitionOptions))),a.xp6(2),a.Q6J("ngTemplateOutlet",e.headerTemplate),a.xp6(1),a.Q6J("ngClass",a.VKq(19,vt,e.virtualScroll)),a.uIk("id",e.listId),a.xp6(1),a.Q6J("ngIf",e.group),a.xp6(1),a.Q6J("ngIf",!e.group),a.xp6(3),a.Q6J("ngTemplateOutlet",e.footerTemplate)}}const bt=function(e,t){return{"p-autocomplete p-component":!0,"p-autocomplete-dd":e,"p-autocomplete-multiple":t}},Ct={provide:s.JU,useExisting:(0,a.Gpc)(()=>wt),multi:!0};let wt=(()=>{class e{constructor(e,t,i,o,s){this.el=e,this.renderer=t,this.cd=i,this.differs=o,this.config=s,this.minLength=1,this.delay=300,this.type="text",this.autoZIndex=!0,this.baseZIndex=0,this.dropdownIcon="pi pi-chevron-down",this.unique=!0,this.completeOnFocus=!1,this.completeMethod=new a.vpe,this.onSelect=new a.vpe,this.onUnselect=new a.vpe,this.onFocus=new a.vpe,this.onBlur=new a.vpe,this.onDropdownClick=new a.vpe,this.onClear=new a.vpe,this.onKeyUp=new a.vpe,this.onShow=new a.vpe,this.onHide=new a.vpe,this.scrollHeight="200px",this.dropdownMode="blank",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autocomplete="off",this.onModelChange=()=>{},this.onModelTouched=()=>{},this.overlayVisible=!1,this.focus=!1,this.inputFieldValue=null,this.differ=o.find([]).create(null),this.listId=(0,qe.Th)()+"_list"}get suggestions(){return this._suggestions}set suggestions(e){this._suggestions=e,this.handleSuggestionsChange()}ngAfterViewChecked(){this.suggestionsUpdated&&this.overlay&&this.overlay.offsetParent&&(setTimeout(()=>{this.overlay&&this.alignOverlay()},1),this.suggestionsUpdated=!1),this.highlightOptionChanged&&(setTimeout(()=>{if(this.overlay&&this.itemsWrapper){let e=Te.p.findSingle(this.overlay,"li.p-highlight");if(e&&Te.p.scrollInView(this.itemsWrapper,e),this.virtualScroll&&this.viewPort){let e=this.viewPort.getRenderedRange();this.updateVirtualScrollSelectedIndex(),(e.start>this.virtualScrollSelectedIndex||e.end<this.virtualScrollSelectedIndex)&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)}}},1),this.highlightOptionChanged=!1)}handleSuggestionsChange(){null!=this._suggestions&&this.loading&&(this.highlightOption=null,this._suggestions.length?(this.noResults=!1,this.show(),this.suggestionsUpdated=!0,this.autoHighlight&&(this.highlightOption=this._suggestions[0])):(this.noResults=!0,this.showEmptyMessage?(this.show(),this.suggestionsUpdated=!0):this.hide()),this.loading=!1)}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.itemTemplate=e.template}})}updateVirtualScrollSelectedIndex(){this.highlightOption&&this.suggestions&&this.suggestions.length&&(this.virtualScrollSelectedIndex=this.findOptionIndex(this.highlightOption,this.suggestions))}writeValue(e){this.value=e,this.filled=this.value&&""!=this.value,this.updateInputField(),this.cd.markForCheck()}getOptionGroupChildren(e){return this.optionGroupChildren?qe.gb.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?qe.gb.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInput(e){if(!this.inputKeyDown&&Te.p.isIE())return;this.timeout&&clearTimeout(this.timeout);let t=e.target.value;this.multiple||this.forceSelection||this.onModelChange(t),0!==t.length||this.multiple||(this.hide(),this.onClear.emit(e),this.onModelChange(t)),t.length>=this.minLength?this.timeout=setTimeout(()=>{this.search(e,t)},this.delay):this.hide(),this.updateFilledState(),this.inputKeyDown=!1}onInputClick(e){this.documentClickListener&&(this.inputClick=!0)}search(e,t){null!=t&&(this.loading=!0,this.completeMethod.emit({originalEvent:e,query:t}))}selectItem(e,t=!0){this.forceSelectionUpdateModelTimeout&&(clearTimeout(this.forceSelectionUpdateModelTimeout),this.forceSelectionUpdateModelTimeout=null),this.multiple?(this.multiInputEL.nativeElement.value="",this.value=this.value||[],this.isSelected(e)&&this.unique||(this.value=[...this.value,e],this.onModelChange(this.value))):(this.inputEL.nativeElement.value=this.resolveFieldData(e),this.value=e,this.onModelChange(this.value)),this.onSelect.emit(e),this.updateFilledState(),t&&(this.itemClicked=!0,this.focusInput())}show(){if(this.multiInputEL||this.inputEL){let e=this.multiple?this.multiInputEL.nativeElement.ownerDocument.activeElement==this.multiInputEL.nativeElement:this.inputEL.nativeElement.ownerDocument.activeElement==this.inputEL.nativeElement;!this.overlayVisible&&e&&(this.overlayVisible=!0)}}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,this.itemsWrapper=this.virtualScroll?Te.p.findSingle(this.overlay,".cdk-virtual-scroll-viewport"):this.overlay,this.appendOverlay(),this.autoZIndex&&(this.overlay.style.zIndex=String(this.baseZIndex+ ++Te.p.zindex)),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.onShow.emit(e);break;case"void":this.onOverlayHide()}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Te.p.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Te.p.getWidth(this.el.nativeElement.children[0])+"px"))}resolveFieldData(e){let t=this.field?qe.gb.resolveFieldData(e,this.field):e;return void 0!==t?t:""}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.appendTo?Te.p.absolutePosition(this.overlay,this.multiple?this.multiContainerEL.nativeElement:this.inputEL.nativeElement):Te.p.relativePosition(this.overlay,this.multiple?this.multiContainerEL.nativeElement:this.inputEL.nativeElement)}hide(){this.overlayVisible=!1,this.cd.markForCheck()}handleDropdownClick(e){if(this.overlayVisible)this.hide();else{this.focusInput();let t=this.multiple?this.multiInputEL.nativeElement.value:this.inputEL.nativeElement.value;"blank"===this.dropdownMode?this.search(e,""):"current"===this.dropdownMode&&this.search(e,t),this.onDropdownClick.emit({originalEvent:e,query:t})}}focusInput(){this.multiple?this.multiInputEL.nativeElement.focus():this.inputEL.nativeElement.focus()}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(u.ws.EMPTY_MESSAGE)}removeItem(e){let t=Te.p.index(e),i=this.value[t];this.value=this.value.filter((e,i)=>i!=t),this.onModelChange(this.value),this.updateFilledState(),this.onUnselect.emit(i)}onKeydown(e){if(this.overlayVisible)switch(e.which){case 40:if(this.group){let e=this.findOptionGroupIndex(this.highlightOption,this.suggestions);if(-1!==e){let t=e.itemIndex+1;t<this.getOptionGroupChildren(this.suggestions[e.groupIndex]).length?(this.highlightOption=this.getOptionGroupChildren(this.suggestions[e.groupIndex])[t],this.highlightOptionChanged=!0):this.suggestions[e.groupIndex+1]&&(this.highlightOption=this.getOptionGroupChildren(this.suggestions[e.groupIndex+1])[0],this.highlightOptionChanged=!0)}else this.highlightOption=this.getOptionGroupChildren(this.suggestions[0])[0]}else{let e=this.findOptionIndex(this.highlightOption,this.suggestions);if(-1!=e){var t=e+1;t!=this.suggestions.length&&(this.highlightOption=this.suggestions[t],this.highlightOptionChanged=!0)}else this.highlightOption=this.suggestions[0]}e.preventDefault();break;case 38:if(this.group){let e=this.findOptionGroupIndex(this.highlightOption,this.suggestions);if(-1!==e){let t=e.itemIndex-1;if(t>=0)this.highlightOption=this.getOptionGroupChildren(this.suggestions[e.groupIndex])[t],this.highlightOptionChanged=!0;else if(t<0){let t=this.suggestions[e.groupIndex-1];t&&(this.highlightOption=this.getOptionGroupChildren(t)[this.getOptionGroupChildren(t).length-1],this.highlightOptionChanged=!0)}}}else{let e=this.findOptionIndex(this.highlightOption,this.suggestions);e>0&&(this.highlightOption=this.suggestions[e-1],this.highlightOptionChanged=!0)}e.preventDefault();break;case 13:this.highlightOption&&(this.selectItem(this.highlightOption),this.hide()),e.preventDefault();break;case 27:this.hide(),e.preventDefault();break;case 9:this.highlightOption&&this.selectItem(this.highlightOption),this.hide()}else 40===e.which&&this.suggestions&&this.search(e,e.target.value);if(this.multiple)switch(e.which){case 8:if(this.value&&this.value.length&&!this.multiInputEL.nativeElement.value){this.value=[...this.value];const e=this.value.pop();this.onModelChange(this.value),this.updateFilledState(),this.onUnselect.emit(e)}}this.inputKeyDown=!0}onKeyup(e){this.onKeyUp.emit(e)}onInputFocus(e){!this.itemClicked&&this.completeOnFocus&&this.search(e,this.multiple?this.multiInputEL.nativeElement.value:this.inputEL.nativeElement.value),this.focus=!0,this.onFocus.emit(e),this.itemClicked=!1}onInputBlur(e){this.focus=!1,this.onModelTouched(),this.onBlur.emit(e)}onInputChange(e){if(this.forceSelection){let t=!1,i=e.target.value.trim();if(this.suggestions)for(let e of this.suggestions){let o=this.field?qe.gb.resolveFieldData(e,this.field):e;if(o&&i===o.trim()){t=!0,this.forceSelectionUpdateModelTimeout=setTimeout(()=>{this.selectItem(e,!1)},250);break}}t||(this.multiple?this.multiInputEL.nativeElement.value="":(this.value=null,this.inputEL.nativeElement.value=""),this.onClear.emit(e),this.onModelChange(this.value),this.updateFilledState())}}onInputPaste(e){this.onKeydown(e)}isSelected(e){let t=!1;if(this.value&&this.value.length)for(let i=0;i<this.value.length;i++)if(qe.gb.equals(this.value[i],e,this.dataKey)){t=!0;break}return t}findOptionIndex(e,t){let i=-1;if(t)for(let o=0;o<t.length;o++)if(qe.gb.equals(e,t[o])){i=o;break}return i}findOptionGroupIndex(e,t){let i,o;if(t)for(let s=0;s<t.length&&(i=s,o=this.findOptionIndex(e,this.getOptionGroupChildren(t[s])),-1===o);s++);return-1!==o?{groupIndex:i,itemIndex:o}:-1}updateFilledState(){this.filled=this.multiple?this.value&&this.value.length||this.multiInputEL&&this.multiInputEL.nativeElement&&""!=this.multiInputEL.nativeElement.value:this.inputFieldValue&&""!=this.inputFieldValue||this.inputEL&&this.inputEL.nativeElement&&""!=this.inputEL.nativeElement.value}updateInputField(){let e=this.resolveFieldData(this.value);this.inputFieldValue=e,this.inputEL&&this.inputEL.nativeElement&&(this.inputEL.nativeElement.value=e),this.updateFilledState()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",e=>{3!==e.which&&(this.inputClick||this.isDropdownClick(e)||this.hide(),this.inputClick=!1,this.cd.markForCheck())}))}isDropdownClick(e){if(this.dropdown){let t=e.target;return t===this.dropdownButton.nativeElement||t.parentNode===this.dropdownButton.nativeElement}return!1}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Te.V(this.containerEL.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onHide.emit()}ngOnDestroy(){this.forceSelectionUpdateModelTimeout&&(clearTimeout(this.forceSelectionUpdateModelTimeout),this.forceSelectionUpdateModelTimeout=null),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.restoreOverlayAppend(),this.onOverlayHide()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(a.ZZ4),a.Y36(u.b4))},e.\u0275cmp=a.Xpm({type:e,selectors:[["p-autoComplete"]],contentQueries:function(e,t,i){if(1&e&&a.Suo(i,u.jx,4),2&e){let e;a.iGM(e=a.CRH())&&(t.templates=e)}},viewQuery:function(e,t){if(1&e&&(a.Gf(Fe,5),a.Gf(Ie,5),a.Gf(Se,5),a.Gf(Ae,5),a.Gf(Ue,5),a.Gf(ke.N7,5)),2&e){let e;a.iGM(e=a.CRH())&&(t.containerEL=e.first),a.iGM(e=a.CRH())&&(t.inputEL=e.first),a.iGM(e=a.CRH())&&(t.multiInputEL=e.first),a.iGM(e=a.CRH())&&(t.multiContainerEL=e.first),a.iGM(e=a.CRH())&&(t.dropdownButton=e.first),a.iGM(e=a.CRH())&&(t.viewPort=e.first)}},hostVars:4,hostBindings:function(e,t){2&e&&a.ekj("p-inputwrapper-filled",t.filled)("p-inputwrapper-focus",t.focus&&!t.disabled||t.overlayVisible)},inputs:{minLength:"minLength",delay:"delay",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",inputStyle:"inputStyle",inputId:"inputId",inputStyleClass:"inputStyleClass",placeholder:"placeholder",readonly:"readonly",disabled:"disabled",virtualScroll:"virtualScroll",itemSize:"itemSize",maxlength:"maxlength",name:"name",required:"required",size:"size",appendTo:"appendTo",autoHighlight:"autoHighlight",forceSelection:"forceSelection",type:"type",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",dropdownIcon:"dropdownIcon",unique:"unique",group:"group",completeOnFocus:"completeOnFocus",field:"field",scrollHeight:"scrollHeight",dropdown:"dropdown",showEmptyMessage:"showEmptyMessage",dropdownMode:"dropdownMode",multiple:"multiple",tabindex:"tabindex",dataKey:"dataKey",emptyMessage:"emptyMessage",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:"autofocus",autocomplete:"autocomplete",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",suggestions:"suggestions"},outputs:{completeMethod:"completeMethod",onSelect:"onSelect",onUnselect:"onUnselect",onFocus:"onFocus",onBlur:"onBlur",onDropdownClick:"onDropdownClick",onClear:"onClear",onKeyUp:"onKeyUp",onShow:"onShow",onHide:"onHide"},features:[a._Bn([Ct])],decls:7,vars:12,consts:[[3,"ngClass","ngStyle"],["container",""],["class","p-autocomplete-input p-inputtext p-component","aria-autocomplete","list","role","searchbox","aria-haspopup","true",3,"ngStyle","class","autocomplete","ngClass","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste",4,"ngIf"],["class","p-autocomplete-multiple-container p-component p-inputtext",3,"ngClass","click",4,"ngIf"],["class","p-autocomplete-loader pi pi-spinner pi-spin",4,"ngIf"],["type","button","pButton","","class","p-autocomplete-dropdown","pRipple","",3,"icon","disabled","click",4,"ngIf"],[3,"ngClass","max-height","ngStyle","class",4,"ngIf"],["aria-autocomplete","list","role","searchbox","aria-haspopup","true",1,"p-autocomplete-input","p-inputtext","p-component",3,"ngStyle","autocomplete","ngClass","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste"],["in",""],[1,"p-autocomplete-multiple-container","p-component","p-inputtext",3,"ngClass","click"],["multiContainer",""],["class","p-autocomplete-token",4,"ngFor","ngForOf"],[1,"p-autocomplete-input-token"],["aria-autocomplete","list","role","searchbox","aria-haspopup","true",3,"disabled","readonly","autocomplete","ngStyle","input","click","keydown","keyup","focus","blur","change","paste"],["multiIn",""],[1,"p-autocomplete-token"],["token",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-autocomplete-token-label",4,"ngIf"],["class","p-autocomplete-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-autocomplete-token-label"],[1,"p-autocomplete-token-icon","pi","pi-times-circle",3,"click"],[1,"p-autocomplete-loader","pi","pi-spinner","pi-spin"],["type","button","pButton","","pRipple","",1,"p-autocomplete-dropdown",3,"icon","disabled","click"],["ddBtn",""],["panel",""],[4,"ngTemplateOutlet"],["role","listbox",1,"p-autocomplete-items",3,"ngClass"],[4,"ngIf"],["itemslist",""],["ngFor","",3,"ngForOf"],[1,"p-autocomplete-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","p-autocomplete-empty-message",4,"ngIf"],["role","option","class","p-autocomplete-item","pRipple","",3,"ngClass","id","click",4,"ngFor","ngForOf"],["role","option","pRipple","",1,"p-autocomplete-item",3,"ngClass","id","click"],[3,"ngStyle","itemSize",4,"ngIf"],[3,"ngStyle","itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf"],["role","option","pRipple","",1,"p-autocomplete-item",3,"ngClass","ngStyle","id","click"],[1,"p-autocomplete-empty-message"],["empty",""]],template:function(e,t){1&e&&(a.TgZ(0,"span",0,1),a.YNc(2,Ne,2,26,"input",2),a.YNc(3,Ye,6,23,"ul",3),a.YNc(4,Qe,1,0,"i",4),a.YNc(5,De,2,3,"button",5),a.YNc(6,Zt,9,21,"div",6),a.qZA()),2&e&&(a.Tol(t.styleClass),a.Q6J("ngClass",a.WLB(9,bt,t.dropdown,t.multiple))("ngStyle",t.style),a.xp6(2),a.Q6J("ngIf",!t.multiple),a.xp6(1),a.Q6J("ngIf",t.multiple),a.xp6(1),a.Q6J("ngIf",t.loading),a.xp6(1),a.Q6J("ngIf",t.dropdown),a.xp6(1),a.Q6J("ngIf",t.overlayVisible))},directives:[o.mk,o.PC,o.O5,o.sg,o.tP,h.Hq,f.H,ke.N7,ke.xd,ke.x0],styles:[".p-autocomplete{display:inline-flex;position:relative}.p-autocomplete-loader{position:absolute;top:50%;margin-top:-.5rem}.p-autocomplete-dd .p-autocomplete-input{flex:1 1 auto;width:1%}.p-autocomplete-dd .p-autocomplete-input,.p-autocomplete-dd .p-autocomplete-multiple-container{border-top-right-radius:0;border-bottom-right-radius:0}.p-autocomplete-dd .p-autocomplete-dropdown{border-top-left-radius:0;border-bottom-left-radius:0}.p-autocomplete .p-autocomplete-panel{min-width:100%}.p-autocomplete-panel{position:absolute;overflow:auto}.p-autocomplete-items{margin:0;padding:0;list-style-type:none}.p-autocomplete-item{cursor:pointer;white-space:nowrap;position:relative;overflow:hidden}.p-autocomplete-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-autocomplete-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-autocomplete-token-icon{cursor:pointer}.p-autocomplete-input-token{flex:1 1 auto;display:inline-flex}.p-autocomplete-input-token input{border:0;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-autocomplete{display:flex}.p-fluid .p-autocomplete-dd .p-autocomplete-input{width:1%}"],encapsulation:2,data:{animation:[(0,xe.X$)("overlayAnimation",[(0,xe.eR)(":enter",[(0,xe.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,xe.jt)("{{showTransitionParams}}")]),(0,xe.eR)(":leave",[(0,xe.jt)("{{hideTransitionParams}}",(0,xe.oB)({opacity:0}))])])]},changeDetection:0}),e})(),yt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.ez,m.j,h.hJ,u.m8,f.T,ke.Cl],u.m8,ke.Cl]}),e})();function xt(e,t){1&e&&(a.TgZ(0,"span",15),a._uU(1,"*SI is required"),a.qZA())}function Tt(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"form",6),a.NdJ("submit",function(){a.CHM(e);const t=a.oxw();return t.submitSIForm(t.siForm.value)}),a.TgZ(1,"div",7),a.TgZ(2,"span",8),a.TgZ(3,"p-autoComplete",9),a.NdJ("completeMethod",function(t){return a.CHM(e),a.oxw().filterSI(t)}),a.qZA(),a.TgZ(4,"label",10),a._uU(5,"Select SI"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",11),a.YNc(7,xt,2,0,"span",12),a.qZA(),a.TgZ(8,"div",13),a._UZ(9,"button",14),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("formGroup",e.siForm),a.xp6(3),a.Q6J("showEmptyMessage",!0)("suggestions",e.filteredSI)("minLength",1),a.xp6(4),a.Q6J("ngIf",e.siFormSubmitted&&e.siFormControls.selectedSI.errors&&e.siFormControls.selectedSI.errors.required)}}function qt(e,t){1&e&&(a.TgZ(0,"small",15),a._uU(1,"Passwords do not match!"),a.qZA())}function kt(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,qt,2,0,"small",12),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",e.piFormControls.confirm_password.errors&&!e.piFormControls.confirm_password.errors.required&&e.piFormControls.confirm_password.errors.mustMatch)}}function Ft(e,t){1&e&&(a.TgZ(0,"span",15),a._uU(1,"*Enter all the required fields"),a.qZA())}function It(e,t){1&e&&(a.TgZ(0,"span",15),a._uU(1,"Email is already in use. Please try another!"),a.qZA())}function St(e,t){if(1&e&&a.YNc(0,It,2,0,"span",45),2&e){a.oxw();const e=a.MAs(63),t=a.oxw();a.Q6J("ngIf",t.piFormSubmitted&&t.piFormControls.email.errors&&t.piFormControls.email.errors.exists)("ngIfElse",e)}}function At(e,t){1&e&&(a.TgZ(0,"span",15),a._uU(1,"Password & Confirm password do not match!"),a.qZA())}function Ut(e,t){if(1&e&&a.YNc(0,At,2,0,"span",12),2&e){const e=a.oxw(2);a.Q6J("ngIf",e.piFormSubmitted&&e.piFormControls.contact.errors&&e.piFormControls.contact.errors.exists)}}function Ot(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"form",16),a.NdJ("submit",function(){a.CHM(e);const t=a.oxw();return t.submitPIForm(t.piForm.value)}),a.TgZ(1,"div",17),a.TgZ(2,"span",8),a._UZ(3,"input",18),a.TgZ(4,"label",19),a._uU(5,"First Name"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",17),a.TgZ(7,"span",8),a._UZ(8,"input",20),a.TgZ(9,"label",21),a._uU(10,"Last Name"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",22),a.TgZ(12,"span",8),a._UZ(13,"input",23),a.TgZ(14,"label",24),a._uU(15,"Contact"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",22),a.TgZ(17,"span",8),a._UZ(18,"input",25),a.TgZ(19,"label",26),a._uU(20,"E-mail"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"div",22),a.TgZ(22,"span",8),a._UZ(23,"input",27),a.TgZ(24,"label",28),a._uU(25,"Telegram Username"),a._UZ(26,"i",29),a.qZA(),a.qZA(),a.qZA(),a.TgZ(27,"div",17),a.TgZ(28,"span",8),a._UZ(29,"input",30),a.TgZ(30,"label",31),a._uU(31,"Password"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(32,"div",17),a.TgZ(33,"span",8),a._UZ(34,"input",32),a.TgZ(35,"label",33),a._uU(36,"Confirm Password"),a.qZA(),a.qZA(),a.YNc(37,kt,2,1,"div",34),a.qZA(),a.TgZ(38,"div",35),a.TgZ(39,"span",8),a._UZ(40,"input",36),a.TgZ(41,"label",37),a._uU(42,"Address"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(43,"div",22),a.TgZ(44,"span",8),a._UZ(45,"input",38),a.TgZ(46,"label",39),a._uU(47,"City"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(48,"div",22),a.TgZ(49,"span",8),a._UZ(50,"p-dropdown",40),a.TgZ(51,"label",41),a._uU(52,"State"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(53,"div",22),a.TgZ(54,"span",8),a._UZ(55,"input",42),a.TgZ(56,"label",43),a._uU(57,"Pincode"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(58,"div",44),a.YNc(59,Ft,2,0,"span",45),a.YNc(60,St,1,2,"ng-template",null,46,a.W1O),a.YNc(62,Ut,1,1,"ng-template",null,47,a.W1O),a.qZA(),a.TgZ(64,"div",44),a.TgZ(65,"button",48),a.NdJ("click",function(){return a.CHM(e),a.oxw().goBack("si")}),a.qZA(),a._UZ(66,"button",49),a.qZA(),a.qZA()}if(2&e){const e=a.MAs(61),t=a.oxw();a.Q6J("formGroup",t.piForm),a.xp6(13),a.Q6J("readOnly",!0),a.xp6(24),a.Q6J("ngIf",t.piFormSubmitted&&t.piFormControls.confirm_password.errors),a.xp6(13),a.Q6J("autoDisplayFirst",!1)("options",t.states),a.xp6(9),a.Q6J("ngIf",t.piFormSubmitted&&(t.piFormControls.address.errors&&t.piFormControls.address.errors.required||t.piFormControls.fname.errors&&t.piFormControls.fname.errors.required||t.piFormControls.lname.errors&&t.piFormControls.lname.errors.required||t.piFormControls.contact.errors&&t.piFormControls.contact.errors.required||t.piFormControls.email.errors&&t.piFormControls.email.errors.required||t.piFormControls.city.errors&&t.piFormControls.city.errors.required||t.piFormControls.state.errors&&t.piFormControls.state.errors.required||t.piFormControls.pincode.errors&&t.piFormControls.pincode.errors.required))("ngIfElse",e)}}function Nt(e,t){1&e&&(a.TgZ(0,"span",15),a._uU(1,"*Enter all the required fields"),a.qZA())}function Et(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"form",6),a.NdJ("submit",function(){a.CHM(e);const t=a.oxw();return t.submitCameraForm(t.cameraForm.value)}),a.TgZ(1,"div",17),a.TgZ(2,"span",8),a._UZ(3,"p-dropdown",50),a.TgZ(4,"label",51),a._uU(5,"Camera"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",17),a.TgZ(7,"span",8),a._UZ(8,"input",52),a.TgZ(9,"label",53),a._uU(10,"Camera Count"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",17),a.TgZ(12,"span",8),a._UZ(13,"p-dropdown",54),a.TgZ(14,"label",55),a._uU(15,"DVR"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",17),a.TgZ(17,"span",8),a._UZ(18,"input",56),a.TgZ(19,"label",57),a._uU(20,"DVR"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"div",44),a.YNc(22,Nt,2,0,"span",12),a.qZA(),a.TgZ(23,"div",58),a.TgZ(24,"button",48),a.NdJ("click",function(){return a.CHM(e),a.oxw().goBack("pi")}),a.qZA(),a._UZ(25,"button",49),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("formGroup",e.cameraForm),a.xp6(3),a.Q6J("autoDisplayFirst",!1)("options",e.cameras),a.xp6(10),a.Q6J("autoDisplayFirst",!1)("options",e.dvrs),a.xp6(9),a.Q6J("ngIf",e.cameraFormSubmitted&&(e.cameraFormControls.camera.errors&&e.cameraFormControls.camera.errors.required||e.cameraFormControls.cameraCount.errors&&e.cameraFormControls.cameraCount.errors.required||e.cameraFormControls.dvr.errors&&e.cameraFormControls.dvr.errors.required||e.cameraFormControls.dvrCount.errors&&e.cameraFormControls.dvrCount.errors.required))}}function Jt(e,t){1&e&&(a.TgZ(0,"small",15),a._uU(1,"Plan is required!"),a.qZA())}function Lt(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,Jt,2,0,"small",12),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",e.planFormControls.selectedPlan.errors&&e.planFormControls.selectedPlan.errors.required)}}function Pt(e,t){1&e&&(a.TgZ(0,"span",15),a._uU(1,"*Enter all the required fields"),a.qZA())}function _t(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"form",6),a.NdJ("submit",function(){a.CHM(e);const t=a.oxw();return t.submitPlanForm(t.planForm.value)}),a.TgZ(1,"div",7),a.TgZ(2,"span",8),a._UZ(3,"p-dropdown",59),a.TgZ(4,"label",60),a._uU(5,"Select Plan"),a.qZA(),a.qZA(),a.YNc(6,Lt,2,1,"div",34),a.qZA(),a.TgZ(7,"div",44),a.YNc(8,Pt,2,0,"span",12),a.qZA(),a.TgZ(9,"div",58),a.TgZ(10,"button",48),a.NdJ("click",function(){return a.CHM(e),a.oxw().goBack("camera")}),a.qZA(),a._UZ(11,"button",61),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("formGroup",e.planForm),a.xp6(3),a.Q6J("autoDisplayFirst",!1)("options",e.plans),a.xp6(3),a.Q6J("ngIf",e.planFormSubmitted&&e.planFormControls.selectedPlan.errors),a.xp6(2),a.Q6J("ngIf",e.planFormSubmitted&&e.planFormControls.selectedPlan.errors&&e.planFormControls.selectedPlan.errors.required)}}const Mt=[{path:"dashboard",component:se},{path:"init-setup/:step",component:(()=>{class e{constructor(e,t,i,o,s,n,r,a,l){this.route=e,this.router=t,this.userService=i,this.fb=o,this.tokenService=s,this.messageService=n,this.planService=r,this.cameraService=a,this.dvrService=l,this.steps=[],this.siFormSubmitted=!1,this.piFormSubmitted=!1,this.states=[],this.cameraFormSubmitted=!1,this.cameras=[],this.dvrs=[],this.planFormSubmitted=!1,this.passwordMatch=!1,this.plans=[]}ngOnInit(){this.steps=[{label:"SI",routerLink:"/user/init-setup/si"},{label:"Personal Information",routerLink:"/user/init-setup/pi"},{label:"Camera Information",routerLink:"/user/init-setup/camera"},{label:"Plan Information",routerLink:"/user/init-setup/plan"}],this.currStepSub=this.route.params.subscribe(e=>this.currStep=e.step),this.currUser=this.tokenService.getUser(),this.siForm=this.fb.group({selectedSI:["",s.kI.required]}),this.piForm=this.fb.group({fname:["",s.kI.required],lname:["",s.kI.required],contact:[this.currUser.contact,s.kI.required],email:["",s.kI.required],telegramUsername:[""],password:["",s.kI.required],confirm_password:["",s.kI.required],address:["",s.kI.required],city:["",s.kI.required],state:["",s.kI.required],pincode:["",s.kI.required]},{validator:this.checkPasswordAndEmail()}),this.cameraForm=this.fb.group({camera:["",s.kI.required],cameraCount:["",s.kI.required],dvr:["",s.kI.required],dvrCount:["",s.kI.required]}),this.planForm=this.fb.group({selectedPlan:["",s.kI.required]}),this.currUser.si&&this.siFormControls.selectedSI.setValue(this.currUser.si),this.currUser.email&&(this.piFormControls.fname.setValue(this.currUser.fname),this.piFormControls.lname.setValue(this.currUser.lname),this.piFormControls.email.setValue(this.currUser.email),this.piFormControls.address.setValue(this.currUser.address),this.piFormControls.city.setValue(this.currUser.city),this.piFormControls.state.setValue(this.currUser.state),this.piFormControls.pincode.setValue(this.currUser.pincode)),this.currUser.camera&&(this.cameraFormControls.camera.setValue(this.currUser.cameras[0]),this.cameraFormControls.cameraCount.setValue(this.currUser.cameras[0].cameraCount),this.cameraFormControls.dvr.setValue(this.currUser.dvrs[0]),this.cameraFormControls.dvrCount.setValue(this.currUser.dvrs[0].dvrCount)),this.currUser.plan&&this.router.navigate(["/user/dashboard"]),this.states=[{name:"Chhattisgarh",value:"Chhattisgarh"}],this.planService.getAllPlans().subscribe(e=>{this.plans=e}),this.cameraService.getAllCameras().subscribe(e=>{this.cameras=e}),this.dvrService.getAllDvrs().subscribe(e=>{this.dvrs=e}),setTimeout(()=>{this.piFormControls.telegramUsername.setValue(""),this.piFormControls.password.setValue(""),this.piFormControls.password.markAsUntouched(),this.piFormControls.password.markAsPristine()},800)}filterSI(e){let t=[],i=e.query;this.userService.getAllSI().subscribe(e=>{for(let o=0;o<e.length;o++)e[o].name=e[o].fname+" "+e[o].lname,0==e[o].name.toLowerCase().indexOf(i.toLowerCase())&&t.push(e[o]);this.filteredSI=t})}submitSIForm(e){Object.keys(this.siFormControls).forEach(e=>{this.siFormControls[e].markAsDirty()}),this.siFormSubmitted=!0,this.siForm.valid&&this.userService.setUserSI(e.selectedSI.contact).subscribe(e=>{e.contact?(e.accessToken=this.tokenService.getToken(),this.tokenService.saveUser(e),this.router.navigate(["/user/init-setup/pi"]),this.messageService.add({severity:"success",summary:"Success",detail:"SI updated successfully."})):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})})}checkPasswordAndEmail(){return e=>{const t=e.controls.password,i=e.controls.confirm_password,o=e.controls.email;this.userService.checkEmailExists(o.value).subscribe(e=>{i.errors&&!i.errors.mustMatch||o.errors&&!o.errors.exists||(i.setErrors(t.value!==i.value?{mustMatch:!0}:null),o.setErrors("exists"==e.status?{exists:!0}:null))})}}submitPIForm(e){Object.keys(this.piFormControls).forEach(e=>{this.piFormControls[e].markAsDirty()}),this.piFormSubmitted=!0,this.piForm.valid&&this.userService.setUserPI(e).subscribe(e=>{e.contact?(e.accessToken=this.tokenService.getToken(),this.tokenService.saveUser(e),this.router.navigate(["/user/init-setup/camera"]),this.messageService.add({severity:"success",summary:"Success",detail:"Personal Information updated successfully."})):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})})}submitCameraForm(e){Object.keys(this.cameraFormControls).forEach(e=>{this.cameraFormControls[e].markAsDirty()}),this.cameraFormSubmitted=!0,this.cameraForm.valid&&this.userService.setUserCamera(e).subscribe(e=>{e.contact?(e.accessToken=this.tokenService.getToken(),this.tokenService.saveUser(e),this.router.navigate(["/user/init-setup/plan"]),this.messageService.add({severity:"success",summary:"Success",detail:"Camera Information updated successfully."})):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})})}submitPlanForm(e){Object.keys(this.planFormControls).forEach(e=>{this.planFormControls[e].markAsDirty()}),this.cameraFormSubmitted=!0,this.planForm.valid&&this.userService.setUserPlan(e).subscribe(e=>{e.contact?(e.accessToken=this.tokenService.getToken(),this.messageService.add({severity:"success",summary:"Success",detail:"Profile updated successfully."}),this.tokenService.saveUser(e),this.router.navigate(["/user/dashboard"])):this.messageService.add({severity:"error",summary:"Error",detail:"Something went wrong. Please try again!"})})}goBack(e){this.router.navigate(["/user/init-setup/"+e])}ngOnDestroy(){this.currStepSub.unsubscribe()}get siFormControls(){return this.siForm.controls}get piFormControls(){return this.piForm.controls}get cameraFormControls(){return this.cameraForm.controls}get planFormControls(){return this.planForm.controls}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(n.gz),a.Y36(n.F0),a.Y36(l.K),a.Y36(s.qu),a.Y36(p.B),a.Y36(u.ez),a.Y36(ae),a.Y36(le.y),a.Y36(pe))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-init-setup"]],features:[a._Bn([u.ez])],decls:11,vars:6,consts:[[1,"dashboard-page"],[1,"p-grid"],[1,"p-col-12"],[3,"model","readonly"],["style","width: 100%; padding: 2% 5%;",3,"formGroup","submit",4,"ngIf"],["style","width: 100%; padding: 2% 5%;","id","piForm",3,"formGroup","submit",4,"ngIf"],[2,"width","100%","padding","2% 5%",3,"formGroup","submit"],[1,"p-field","p-d-inline-block","p-col-12"],[1,"p-float-label"],["formControlName","selectedSI","id","selectedSI","field","name",3,"showEmptyMessage","suggestions","minLength","completeMethod"],["for","selectedSI",1,"required"],[1,"p-col-12","p-md-6","p-d-inline-block"],["class","p-error",4,"ngIf"],[1,"p-col-6","p-d-inline-block","p-text-right"],["pButton","","pRipple","","type","submit","label","Next","icon","pi pi-angle-right","iconPos","right",1,"p-button-outlined"],[1,"p-error"],["id","piForm",2,"width","100%","padding","2% 5%",3,"formGroup","submit"],[1,"p-field","p-d-inline-block","p-col-12","p-md-6"],["type","text","id","fname","pInputText","","formControlName","fname"],["for","fname",1,"required"],["type","text","id","lname","pInputText","","formControlName","lname"],["for","lname",1,"required"],[1,"p-field","p-d-inline-block","p-col-12","p-md-4"],["type","text","id","contact","pInputText","","formControlName","contact",3,"readOnly"],["for","contact",1,"required"],["type","text","id","email","pInputText","","formControlName","email"],["for","email",1,"required"],["type","text","id","telegramUsername","pInputText","","formControlName","telegramUsername","autocomplete","off"],["for","telegramUsername"],[1,"pi","pi-send","p-ml-1"],["type","password","id","password","pInputText","","formControlName","password"],["for","password",1,"required"],["type","password","id","confirm_password","pInputText","","formControlName","confirm_password"],["for","confirm_password",1,"required"],[4,"ngIf"],[1,"p-field","p-d-inline-block","p-col-12","p-md-12"],["type","text","id","address","pInputText","","formControlName","address"],["for","address",1,"required"],["type","text","id","city","pInputText","","formControlName","city"],["for","city",1,"required"],["inputId","state","formControlName","state","optionLabel","name",3,"autoDisplayFirst","options"],["for","state",1,"required"],["type","text","id","pincode","pInputText","","formControlName","pincode"],["for","pincode",1,"required"],[1,"p-col-12","p-md-12","p-d-inline-block"],["class","p-error",4,"ngIf","ngIfElse"],["else1",""],["else2",""],["pButton","","pRipple","","icon","pi pi-angle-left","label","Back","type","button",1,"p-button-outlined","p-button-secondary",2,"width","auto",3,"click"],["pButton","","pRipple","","label","Next","icon","pi pi-angle-right","iconPos","right","type","submit",1,"p-button-outlined",2,"width","auto","float","right"],["inputId","camera","formControlName","camera","optionLabel","name",3,"autoDisplayFirst","options"],["for","camera",1,"required"],["type","number","id","cameraCount","pInputText","","formControlName","cameraCount"],["for","cameraCount",1,"required"],["inputId","dvr","formControlName","dvr","optionLabel","name",3,"autoDisplayFirst","options"],["for","dvr",1,"required"],["type","number","id","dvrCount","pInputText","","formControlName","dvrCount"],["for","dvrCount",1,"required"],[1,"p-col-12","p-md-12"],["inputId","selectedPlan","formControlName","selectedPlan","optionLabel","name",3,"autoDisplayFirst","options"],["for","selectedPlan",1,"required"],["pButton","","pRipple","","label","Save","icon","pi pi-angle-right","iconPos","right","type","submit",1,"p-button-outlined","p-button-success",2,"width","auto","float","right"]],template:function(e,t){1&e&&(a._UZ(0,"app-header"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a.TgZ(3,"div",2),a.TgZ(4,"p-card"),a._UZ(5,"p-steps",3),a.YNc(6,Tt,10,5,"form",4),a.YNc(7,Ot,67,7,"form",5),a.YNc(8,Et,26,6,"form",4),a.YNc(9,_t,12,5,"form",4),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(10,"p-toast")),2&e&&(a.xp6(5),a.Q6J("model",t.steps)("readonly",!0),a.xp6(1),a.Q6J("ngIf","si"==t.currStep),a.xp6(1),a.Q6J("ngIf","pi"==t.currStep),a.xp6(1),a.Q6J("ngIf","camera"==t.currStep),a.xp6(1),a.Q6J("ngIf","plan"==t.currStep))},directives:[B,ee.Z,we,o.O5,Z.FN,s._Y,s.JL,s.sg,wt,s.JJ,s.u,h.Hq,f.H,s.Fj,m.o,g.Lt,s.wV],styles:[""]}),e})()},{path:"cases/:status",component:X},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"**",redirectTo:"dashboard",pathMatch:"full"}];let Yt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.Bz.forChild(Mt)],n.Bz]}),e})();var Qt=i(3581),Dt=i(6094);let Ht=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.ez,Yt,c.W6,ee.d,G.U$,h.hJ,f.T,Qt.D,Z.EV,ye,yt,s.UX,g.kW,m.j,d.S,v.zz,b.$,Dt.O]]}),e})()}}]);